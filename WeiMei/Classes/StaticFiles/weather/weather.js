!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports='<div class="mod-toolbar">\r\n    <h2 id="cancleSearchcity">添加城市</h2>\r\n    <div class="back" id="cancleAddcity">取消</div>\r\n</div>\r\n<div class="page-wrapper mod-card is-nopadding">\r\n    <div class="mod-search !fixed is-novel">\r\n        <div class="search-box">\r\n            <div class="input">\r\n                <input type="text" placeholder="请输入城市名（中文或拼音）" id="userInputCity" class="iphone">\r\n                <i class="G-ico G-ico-x" style="display:;" id="searchInputDel"></i>\r\n            </div>\r\n        </div>\r\n        <!-- 实时匹配 -->\r\n        <div class="search-mach">\r\n            <ul class="location-list" style="display:;" id="searchDataList">\r\n\r\n            </ul>\r\n        </div>\r\n        <p class="mod-search--result-amount hidden" id="searchResultTip">未搜索到结果</p>\r\n    </div>\r\n    <h1 class="title-out-card">热门城市</h1>\r\n    <ul class="location-list" id="hotCitysList">\r\n        \r\n    </ul>\r\n</div>'},{}],2:[function(a,b,c){b.exports='<div class="mod-toolbar">\r\n    <h2>拖拽可排序</h2>\r\n    <div class="right" id="saveCity">完成</div>\r\n</div>\r\n<div class="page-wrapper mod-setting2">\r\n    <div class="mod-card is-nopadding">\r\n        <ul class="location-list" id="editCityList">\r\n            <% obj && obj.forEach(function (item) { %>\r\n            <li data-citygbid="<%= item.ID %>"><span><%= item.CH %></span><i class="G-ico G-ico-del-life"></i></li>\r\n            <% });%>\r\n        </ul>\r\n    </div>\r\n    <p class="tips-out-card">排在第一个的城市，将作为天气推送城市</p>\r\n</div>\r\n<div class="mod-alert hidden">\r\n    <div class="alert-box short-text" id="alert2" style="margin-top: 272px;">\r\n        <div class="alert-content content-text">\r\n            <p>至少保留一个城市</p>\r\n        </div>\r\n        <div class="btn-group">\r\n            <a class="btn btn-blue">确定</a>\r\n        </div>\r\n    </div>\r\n</div>'},{}],3:[function(a,b,c){b.exports='<% HOTCITYLIST && HOTCITYLIST.forEach(function (item) { %>\r\n    <li data-citygbid="<%= item.ID %>"><span><%= item.CH %></span></li>\r\n<% });%>'},{}],4:[function(a,b,c){b.exports='<div class="mod-toolbar">\r\n    <div class="back" id="back">返回</div>\r\n    <h2>生活服务</h2>\r\n    <div class="right" id="editCity">编辑</div>\r\n</div>\r\n<div class="page-wrapper mod-setting2">\r\n    <div class="mod-card is-margin-top8">\r\n        <a id="autoGps" class="auto-locate on">自动定位<span class="btn-toggle"></span></a>\r\n    </div>\r\n    <h1 class="title-out-card">城市列表</h1>\r\n    <div class="mod-card is-nopadding">\r\n        <ul class="location-list">\r\n            <li class="local-status" id="userCurrentCitys"></li>\r\n            <% obj && obj.length > 0 && obj.forEach(function (item) { %>\r\n                <!--TODO:-->\r\n                <li data-citygbid="<%= item.ID %>"><span><%= item.CH %></span></li>\r\n            <% });%>\r\n            <li id="addCity"><span><i class="G-ico G-ico-add"></i>添加城市</span></li>\r\n            <li id="addCity-disabled" class="local-disabled"><span><i class="G-ico G-ico-add"></i>添加城市（最多5个自定义城市）</span></li>\r\n        </ul>\r\n    </div>\r\n    <p class="tips-out-card">排在第一个的城市，将作为天气推送城市</p>\r\n</div>\r\n<div class="mod-alert hidden">\r\n    <div class="alert-box short-text" id="alert2" style="margin-top: 272px;">\r\n        <div class="alert-content content-text">\r\n            <p>至少保留一个城市</p>\r\n        </div>\r\n        <div class="btn-group">\r\n            <a class="btn btn-blue">确定</a>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},{}],5:[function(a,b,c){b.exports='<% obj && obj.forEach(function (item) { %>\r\n    <li data-citygbid="<%= item.ID %>"><%= item.CH %><% if (item.cityName) {%>-<%= item.cityName %><% } %><% if (item.provinceName) { %>-<%= item.provinceName %><% } %></li>\r\n<% }); %>\r\n'},{}],6:[function(a,b,c){b.exports='<div id="currentCitybgClass" class="mod-weather2 <%= data[0].weather.current.bgClass %>" style="-webkit-transform: translate3d(0,0,0);">\r\n    <div class="mod-top">\r\n        <span class="city-link">\r\n            <span data-hash="#p=multiSetting" id="citybid" data-citybid="<%= data[0].citybid %>" data-click="001"><i id="gpsIcon" class="G-ico G-ico-location"></i><span id="userCityName"><%= data[0].cityname %></span></span>\r\n        </span>\r\n            <ul class="city-indicator">\r\n                <% if(data && data.length > 1) { %>\r\n                    <% data && data.forEach(function (item,index) { %>\r\n                        <li <% if(index == 0) {%>class="active" <% }%>></li>\r\n                    <% });%> \r\n                <% } %>\r\n            </ul>\r\n        <a data-hash="#p=multiSetting" data-click="002" class="G-ico G-ico-menu"></a>\r\n    </div>\r\n    <div class="banner-slider" id="banner_slider">\r\n        <div class="swipe-wrap">\r\n            <!-- 轮播city1 -->\r\n            <% data && data.forEach(function (item) { %>\r\n            <div class="slide-item" data-cityid="<%=item.citybid %>" data-cityname="<%= item.cityname %>" data-bgclass="<%= item.weather.current.bgClass %>">\r\n                <div class="mod-today">\r\n                    <div class="main-temp" data-click="003" data-url="<%= item.weather.links.weather%>"><%= item.weather.current.curT %><span><%= item.weather.current.text %></span></div>\r\n                    <div class="detail">\r\n                        <div class="temp"><%= item.weather.current.tempRange %></div>\r\n                        <% if(item.weather.current.pm25) { %><div class="air" data-click="004" data-url="<%= item.weather.links.pm25%>"><%= item.weather.current.pm25.text %> <%= item.weather.current.pm25.val %></div><% }%>\r\n                        <% if (item.weather.current.windTxt) { %><div class="wind"><%= item.weather.current.windTxt %></div><% } %>\r\n                    </div>\r\n                    <% item.weather.current.warning && item.weather.current.warning.forEach(function(item) {%>\r\n                        <div class="weather-warn <%= item.class%>" data-url="<%= item.url%>" data-click="005"><%= item.text%></div>\r\n                    <% }) %>\r\n                </div>\r\n                <div class="mod-next-five-day" data-click="006" data-url="<%= item.weather.links.weather%>">\r\n                    <div class="graph">\r\n                        <div><canvas  height="188" width="576"></canvas></div>\r\n                    </div>\r\n                    <ul class="detail">\r\n                        <% item.weather.future && item.weather.future.forEach(function(item) {%>\r\n                        <li class="<%= item.class%>" data-lowtemp="<%= item.lowT %>" data-hightemp="<%= item.hightT%>"><%= item.week%></li>\r\n                        <%})%>\r\n                    </ul>\r\n                </div>\r\n                <div class="mod-more-forecast">\r\n                    <a data-click="007" data-url="<%= item.weather.links.future15%>">15天预报<i class="G-ico G-ico-arr-r"></i></a>\r\n                    <a data-click="008" data-url="<%= item.weather.links.temp24%>">24小时预报<i class="G-ico G-ico-arr-r"></i></a>\r\n                </div>\r\n                <div class="mod--tips">\r\n                    <ul >\r\n                        <% if(item.weather.lifeindex && item.weather.lifeindex.length > 0) { %>\r\n                            <% if(item.weather.lifeindex.length % 3 == 0) { %>\r\n                                <% item.weather.lifeindex.forEach(function(item,index) {%>\r\n                                    <li class="<%= item.class %>" data-click=<%= "00" +(9+index) %>  data-url="<%= item.link%>"><i></i><%= item.val %><span><%= item.index %></span></li>\r\n                                <%})%>\r\n                            <% } %>\r\n                            <% if(item.weather.lifeindex.length % 3 == 1) { %>\r\n                                <% item.weather.lifeindex.forEach(function(item) {%>\r\n                                    <li class="<%= item.class %>" data-click=<%= "0" +(9+index) %> data-url="<%= item.link%>"><i></i><%= item.val %><span><%= item.index %></span></li>\r\n                                <%})%>\r\n                                <li><i></i></li>\r\n                                <li><i></i></li>\r\n                            <% } %>\r\n                            <% if(item.weather.lifeindex.length % 3 == 2) { %>\r\n                                <% item.weather.lifeindex.forEach(function(item) {%>\r\n                                    <li class="<%= item.class %>" data-click=<%= "0" +(9+index) %> data-url="<%= item.link%>"><i></i><%= item.val %><span><%= item.index %></span></li>\r\n                                <%})%>\r\n                                <li><i></i></li>\r\n                            <% } %>\r\n                        <% } %>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n           <% });%> \r\n        </div>\r\n    </div>\r\n    <div class="mod-find-more">\r\n        <a data-url="<%= data[0].weather.links.moreLifeUrl%>" data-click="015"><span>发现精彩生活<i class="G-ico G-ico-arr-r"></i></a>\r\n    </div>\r\n    \r\n</div>\r\n'},{}],7:[function(a,b,c){b.exports='<div class="mod-locate-fail" style="-webkit-transform: translate3d(0,0,0);">\r\n    <div class="top-info">\r\n        <%if(citybid) {%>\r\n            <div class="city current" id="citybid" data-citybid="<%=citybid%>" data-url="#p=multiSetting"><%= cityname%></div>\r\n        <%} else {%>\r\n            <div class="city current" id="citybid" data-citybid="0" data-url="#p=multiSetting">选择城市</div>\r\n        <%}%>\r\n        <div class="btn-toggle"></div>\r\n    </div>\r\n\r\n    <div class="fail-tip">\r\n        <i class="user-dispp"></i>\r\n\r\n        <p>找不到你所在的城市<br/>信息, 请手动选择</p>\r\n    </div>\r\n</div>'},{}],8:[function(a,b,c){a("./page/app.js").start()},{"./page/app.js":16}],9:[function(a,b,c){function d(a,b){"use strict";function c(){p=t.children,s=p.length,p.length<2&&(b.continuous=!1),o.transitions&&b.continuous&&p.length<3&&(t.appendChild(p[0].cloneNode(!0)),t.appendChild(t.children[1].cloneNode(!0)),p=t.children),q=new Array(p.length),r=a.getBoundingClientRect().width||a.offsetWidth,t.style.width=p.length*r+"px";for(var c=p.length;c--;){var d=p[c];d.style.width=r+"px",d.setAttribute("data-index",c),o.transitions&&(d.style.left=c*-r+"px",h(c,u>c?-r:c>u?r:0,0))}b.continuous&&o.transitions&&(h(f(u-1),-r,0),h(f(u+1),r,0)),o.transitions||(t.style.left=u*-r+"px"),a.style.visibility="visible"}function d(){b.continuous?g(u-1):u&&g(u-1)}function e(){b.continuous?g(u+1):u<p.length-1&&g(u+1)}function f(a){return(p.length+a%p.length)%p.length}function g(a,c){if(u!=a){if(o.transitions){var d=Math.abs(u-a)/(u-a);if(b.continuous){var e=d;d=-q[f(a)]/r,d!==e&&(a=-d*p.length+a)}for(var g=Math.abs(u-a)-1;g--;)h(f((a>u?a:u)-g-1),r*d,0);a=f(a),h(u,r*d,c||v),h(a,0,c||v),b.continuous&&h(f(a-d),-(r*d),0)}else a=f(a),j(u*-r,a*-r,c||v);u=a,n(b.callback&&b.callback(u,p[u]))}}function h(a,b,c){i(a,b,c),q[a]=b}function i(a,b,c){var d=p[a],e=d&&d.style;e&&(e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration=c+"ms",e.webkitTransform="translate("+b+"px,0)translateZ(0)",e.msTransform=e.MozTransform=e.OTransform="translateX("+b+"px)")}function j(a,c,d){if(!d)return void(t.style.left=c+"px");var e=+new Date,f=setInterval(function(){var g=+new Date-e;return g>d?(t.style.left=c+"px",y&&k(),b.transitionEnd&&b.transitionEnd.call(event,u,p[u]),void clearInterval(f)):void(t.style.left=(c-a)*(Math.floor(g/d*100)/100)+a+"px")},4)}function k(){w=setTimeout(e,y)}function l(){y=0,clearTimeout(w)}var m=function(){},n=function(a){setTimeout(a||m,0)},o={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(a){var b=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var c in b)if(void 0!==a.style[b[c]])return!0;return!1}(document.createElement("swipe"))};if(a){var p,q,r,s,t=a.children[0];b=b||{};var u=parseInt(b.startSlide,10)||0,v=b.speed||300;b.continuous=void 0!==b.continuous?b.continuous:!0;var w,x,y=b.auto||0,z={},A={},B={handleEvent:function(a){switch(a.type){case"touchstart":this.start(a);break;case"touchmove":this.move(a);break;case"touchend":n(this.end(a));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":n(this.transitionEnd(a));break;case"resize":n(c)}b.stopPropagation&&a.stopPropagation()},start:function(a){var b=a.touches[0];z={x:b.pageX,y:b.pageY,time:+new Date},x=void 0,A={},t.addEventListener("touchmove",this,!1),t.addEventListener("touchend",this,!1)},move:function(a){if(!(a.touches.length>1||a.scale&&1!==a.scale)){b.disableScroll&&a.preventDefault();var c=a.touches[0];A={x:c.pageX-z.x,y:c.pageY-z.y},"undefined"==typeof x&&(x=!!(x||Math.abs(A.x)<Math.abs(A.y))),x||(a.preventDefault(),l(),b.continuous?(i(f(u-1),A.x+q[f(u-1)],0),i(u,A.x+q[u],0),i(f(u+1),A.x+q[f(u+1)],0)):(A.x=A.x/(!u&&A.x>0||u==p.length-1&&A.x<0?Math.abs(A.x)/r+1:1),i(u-1,A.x+q[u-1],0),i(u,A.x+q[u],0),i(u+1,A.x+q[u+1],0)))}},end:function(a){var c=+new Date-z.time,d=Number(c)<250&&Math.abs(A.x)>20||Math.abs(A.x)>r/2,e=!u&&A.x>0||u==p.length-1&&A.x<0;b.continuous&&(e=!1);var g=A.x<0;x||(d&&!e?(g?(b.continuous?(h(f(u-1),-r,0),h(f(u+2),r,0)):h(u-1,-r,0),h(u,q[u]-r,v),h(f(u+1),q[f(u+1)]-r,v),u=f(u+1)):(b.continuous?(h(f(u+1),r,0),h(f(u-2),-r,0)):h(u+1,r,0),h(u,q[u]+r,v),h(f(u-1),q[f(u-1)]+r,v),u=f(u-1)),b.callback&&b.callback(u,p[u])):b.continuous?(h(f(u-1),-r,v),h(u,0,v),h(f(u+1),r,v)):(h(u-1,-r,v),h(u,0,v),h(u+1,r,v))),t.removeEventListener("touchmove",B,!1),t.removeEventListener("touchend",B,!1)},transitionEnd:function(a){parseInt(a.target.getAttribute("data-index"),10)==u&&(y&&k(),b.transitionEnd&&b.transitionEnd.call(a,u,p[u]))}};return c(),y&&k(),o.addEventListener?(o.touch&&t.addEventListener("touchstart",B,!1),o.transitions&&(t.addEventListener("webkitTransitionEnd",B,!1),t.addEventListener("msTransitionEnd",B,!1),t.addEventListener("oTransitionEnd",B,!1),t.addEventListener("otransitionend",B,!1),t.addEventListener("transitionend",B,!1)),window.addEventListener("resize",B,!1)):window.onresize=function(){c()},{setup:function(){c()},slide:function(a,b){l(),g(a,b)},prev:function(){l(),d()},next:function(){l(),e()},stop:function(){l()},getPos:function(){return u},getNumSlides:function(){return s},kill:function(){l(),t.style.width="",t.style.left="";for(var a=p.length;a--;){var b=p[a];b.style.width="",b.style.left="",o.transitions&&i(a,0,0)}o.addEventListener?(t.removeEventListener("touchstart",B,!1),t.removeEventListener("webkitTransitionEnd",B,!1),t.removeEventListener("msTransitionEnd",B,!1),t.removeEventListener("oTransitionEnd",B,!1),t.removeEventListener("otransitionend",B,!1),t.removeEventListener("transitionend",B,!1),window.removeEventListener("resize",B,!1)):window.onresize=null}}}}(window.jQuery||window.Zepto)&&!function(a){a.fn.Swipe=function(b){return this.each(function(){a(this).data("Swipe",new d(a(this)[0],b))})}}(window.jQuery||window.Zepto),b.exports=c=d},{}],10:[function(a,b,c){function d(a){if(!a)return!1;var b=a.split("."),c=window;return b.every(function(a){return!!(c=c[a])})&&"function"==typeof c}function e(a,b,c,e,g,h,i,j){if("-1"!=b&&a){var k="",l=f(b,c,e,g,h,i);d("window.browser.app.doTokenFeature")&&window.browser.app.doTokenFeature(function(a){console.log(a)},{uid:k,feature:l});try{if(d("window.browser.startpage.callNaviCard")){"1"==b&&(b="-1");var m={cardId:j,funcName:"onCityChange",params:JSON.stringify({CityId:b})};window.browser.startpage.callNaviCard(m)}else d("window.browser.startpage.requestRefreshCard")&&window.browser.startpage.requestRefreshCard(function(a){},{cardID:j})}catch(n){console.log(n)}}}function f(a,b,c,d,e,f){var g,h=e?"mtt.ajax.success":"mtt.ajax.failed",i=f?"mtt.authorize":"",j="";return!a&&b&&c&&(j=c+","+b),g="mtt.browserid|"+a+"|"+j+"|mtt.srv.nowtime|"+h+"|"+d+"|mtt.clear.expecttime|mtt.notify|"+i}function g(a){return i(a,window.location.search)}function h(a){return i(a,window.location.hash)}function i(a,b){if(!a||"string"!=typeof a||!b||"string"!=typeof b)return null;var c=new RegExp("(^|&|#|/?)"+a+"=([^&]*)(&|$)","i"),d=b.match(c);return null!=d?unescape(d[2]):null}a("zepto");b.exports={isfun:d,g_push:e,getQueryString:g,getHashString:h}},{zepto:44}],11:[function(a,b,c){b.exports={set:function(a,b,c){var d=1e3;c&&(d=c);var e=new Date;e.setTime(e.getTime()+24*d*60*60*1e3),escapeValue=escape(b),document.cookie=a+"="+escapeValue+";expires="+e.toGMTString()},get:function(a){var b=a+"=";if(document.cookie.length>0){var c=document.cookie.indexOf(b);if(-1!=c){c+=b.length;var d=document.cookie.indexOf(";",c);return-1==d&&(d=document.cookie.length),unescape(document.cookie.substring(c,d))}return""}return""},clear:function(a){var b=new Date;b.setTime(b.getTime()-864e5),setCookie(a,"",b)}}},{}],12:[function(a,b,c){!function(a,b){function c(a){return a===a.top?a:c(a.parent)}var d=c(a).document,e=d.documentElement,f=d.querySelector('meta[name="viewport"]'),g=d.querySelector('meta[name="flexible"]'),h=0,i=0,j=b.flexible||(b.flexible={});if(f&&f.remove(),g){var k=g.getAttribute("content");if(k){var l=k.match(/initial\-dpr=([\d\.]+)/),m=k.match(/maximum\-dpr=([\d\.]+)/);l&&(h=parseFloat(l[1]),i=parseFloat((1/h).toFixed(2))),m&&(h=parseFloat(m[1]),i=parseFloat((1/h).toFixed(2)))}}if(!h&&!i){var n=a.navigator.appVersion.match(/android/gi),o=(a.navigator.appVersion.match(/iphone/gi),navigator.userAgent.indexOf("UCBrowser")>-1&&n,a.devicePixelRatio);h=o,i=1/h}if(e.setAttribute("data-dpr",h),f=d.createElement("meta"),f.setAttribute("name","viewport"),f.setAttribute("content","width="+window.screen.width+", initial-scale="+i+", maximum-scale="+i+", minimum-scale="+i+", user-scalable=no"),e.firstElementChild)e.firstElementChild.appendChild(f);else{var p=d.createElement("div");p.appendChild(f),d.write(p.innerHTML)}j.dpr=a.dpr=h}(window.top,window.top.lib||(window.top.lib={}))},{}],13:[function(a,b,c){b.exports={set:function(a,b){return a?(localStorage.setItem(a,JSON.stringify(b)),!0):!1},get:function(a){if(a){var b=localStorage.getItem(a);try{b=JSON.parse(b)}catch(c){}return b}},clear:function(a){return a?(localStorage.removeItem(a),!0):!1},clearAll:function(){return localStorage.clear(),!0}}},{}],14:[function(a,b,c){!function(a){function b(a,b,c){f("transform",a,"translate("+b+"px, "+c+"px)")}function c(a,b){f("transition",a,b)}function d(a){return a=a.originalEvent||a,window.event&&window.event.changedTouches&&event.changedTouches[0].pageX||a.pageX}function e(a){return a=a.originalEvent||a,window.event&&window.event.changedTouches&&event.changedTouches[0].pageY||a.pageY}function f(a,b,c){a=a.toLowerCase();for(var d=a.charAt(0).toUpperCase()+a.substr(1),e=["webkit","Moz","ms","O"],f=e.map(function(a){return a+d}).concat("transform"),g=0,h=f.length;h>g;++g)if(f[g]in b.style){if(void 0===c)return b.style[f[g]];b.style[f[g]]=c;break}}function g(a,b,c,d){if(a[0]){c=c.originalEvent||c;var e={};n.forEach(function(a){e[a]=c[a]}),e.currentTarget=e.target=a[0];var f=a[0].ownerDocument.defaultView||a[0].ownerDocument.parentWindow,g=f.$.Event(b,e);return f.$(a[0]).trigger(g,d),g}}function h(a,b){var c=a.matches||a.matchesSelector||a.msMatchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.oMatchesSelector;return c?c.call(a,b):!1}function i(a){return Array.prototype.slice.call(a)}function j(b,c,d){return function(e,f,g){var h=[];return this.each(function(){var i=a(this).data(c);if("string"==typeof e){if("undefined"==typeof i)throw new Error(c+" not defined");switch(e){case"enable":i.enable();break;case"disable":i.disable();break;case"destroy":i.destroy(),a(this).removeData(c);break;case"option":void 0!==g?i.opts[f]=g:"object"==typeof f?i.opts=a.extend(i.opts,f):f?h.push(i.opts[f]):h.push(i.opts);break;case"toArray":if("sortable"!==c)return;h.push(i.toArray(f))}}else{if(i)return a.extend(i.opts,e),this;i=new b(a(this),a.extend({},d,e)),i.create(),a(this).data(c,i)}}),h.length?1===h.length?h[0]:h:this}}var k="mousedown touchstart MSPointerDown pointerdown",l="mouseup touchend MSPointerUp pointerup",m="mousemove touchmove MSPointerMove pointermove scroll",n=["altKey","bubbles","button","cancelable","charCode","clientX","clientY","ctrlKey","currentTarget","data","detail","eventPhase","metaKey","offsetX","offsetY","originalTarget","pageX","pageY","relatedTarget","screenX","screenY","shiftKey","target","view","which"],o=0,p=function(){this.eventHandler=a("<div />"),this.parent=this.el=this.handle=null,this.origin={x:0,y:0,transition:null,translate:null,offset:{x:0,y:0}},this.lastEntered=this.currentTarget=null,this.lastX=this.lastY=this.lastDirection=null,this.originalCss={},this.windows=[window];var b;Object.defineProperty(this,"placeholder",{get:function(){return b},set:function(a){b!==a&&(b&&b.remove(),b=a)}})};p.prototype.on=function(){return this.eventHandler.on.apply(this.eventHandler,Array.prototype.slice.call(arguments)),this},p.prototype.off=function(){return this.eventHandler.off.apply(this.eventHandler,Array.prototype.slice.call(arguments)),this},p.prototype.start=function(b,h,i,j){this.parent=b,this.el=h,this.handle=j;var h=this.handle||this.el;this.origin.x=d(i),this.origin.y=e(i),this.origin.transform=f("transform",this.el[0]),this.origin.transition=f("transition",this.el[0]);var k=this.el[0].getBoundingClientRect();return this.origin.offset.x=k.left+(window.scrollX||window.pageXOffset)-this.origin.x,this.origin.offset.y=k.top+(window.scrollY||window.pageYOffset)-this.origin.y,this.origin.scrollX=window.scrollX||window.pageXOffset,this.origin.scrollY=window.scrollY||window.pageYOffset,h[0].style.pointerEvents="none",this.windows.forEach(function(b){a(b).on(m,a.proxy(this.move,this)),a(b).on(l,a.proxy(this.stop,this))},this),c(h[0],""),g(this.eventHandler,"dragging:start",i),this.el},p.prototype.stop=function(b){var d=null,e=!0;if(this.last){var h=this.last;this.last=null,d=g(a(h),"dragging:drop",b),e=!d.isDefaultPrevented()}if(this.el){for(var i in this.originalCss)this.el.css(i,this.originalCss[i]),delete this.originalCss[i];g(this.eventHandler,"dragging:stop",b,this.el),this.placeholder=null,this.handle||this.adjustPlacement(b);var j=this.el;this.handle&&this.handle.remove(),setTimeout(function(a,b){c(a[0],"all 0.25s ease-in-out 0s"),f("transform",a[0],b.transform||""),setTimeout(c.bind(null,a[0],b.transition||""),250),a[0].style.pointerEvents=""}.bind(null,j,this.origin)),this.windows.forEach(function(b){a(b).off(m,this.move),a(b).off(l,this.stop)},this),this.parent=this.el=this.handle=null}},p.prototype.move=function(c){if(this.el){var f=this.el[0].ownerDocument,h=f.defaultView||f.parentWindow;if("scroll"!==c.type){var i=d(c),j=e(c);c.view!==h&&c.view.frameElement&&(i+=c.view.frameElement.offsetLeft,j+=c.view.frameElement.offsetTop);var k,l=c.clientX||c.originalEvent&&c.originalEvent.clientX||window.event&&window.event.touches&&window.event.touches[0].clientX||0,m=c.clientY||c.originalEvent&&c.originalEvent.clientY||window.event&&window.event.touches&&window.event.touches[0].clientY||0,f=this.el[0].ownerDocument;t?(k=c.view.document.msElementsFromPoint(l,m),k=k[0]===this.el[0]?k[1]:k[0]):k=c.view.document.elementFromPoint(l,m);var n=this.lastX-i,o=this.lastY-j,p=o>0&&"up"||0>o&&"down"||n>0&&"up"||0>n&&"down"||this.lastDirection;q.currentTarget||this.setCurrent(k),this.currentTarget&&(k!==this.last&&this.lastEntered!==this.currentTarget?(g(a(this.lastEntered),"dragging:leave",c),g(a(this.currentTarget),"dragging:enter",c),this.lastEntered=this.currentTarget):p!==this.lastDirection&&g(a(this.currentTarget),"dragging:diverted",c)),this.last=k,this.currentTarget=null,this.lastDirection=p,this.lastX=i,this.lastY=j,this.origin.scrollX=window.scrollX||window.pageXOffset,this.origin.scrollY=window.scrollY||window.pageYOffset}else var i=this.lastX+((window.scrollX||window.pageXOffset)-this.origin.scrollX),j=this.lastY+((window.scrollY||window.pageYOffset)-this.origin.scrollY);if(c.view!==h&&c.view&&c.view.frameElement){var r=-1*(j-(window.scrollY||window.pageYOffset)-window.innerHeight),s=document.documentElement.offsetHeight<(window.scrollY||window.pageYOffset)+window.innerHeight;10>=r&&!s&&setTimeout(function(){window.scrollBy(0,5)},50);var u=j-(window.scrollY||window.pageYOffset),v=(window.scrollY||window.pageYOffset)<=0;10>=u&&!v&&setTimeout(function(){window.scrollBy(0,-5)},50)}var n=i-this.origin.x,o=j-this.origin.y,w=this.handle||this.el;b(w[0],n,o)}},p.prototype.setCurrent=function(a){this.currentTarget=a},p.prototype.css=function(a,b){this.el&&(this.originalCss[a]=this.el.css(a),this.el.css(a,b))},p.prototype.adjustPlacement=function(a){var c=this.handle&&this.handle[0]||this.el[0];b(c,0,0);var f=c.getBoundingClientRect();this.origin.x=f.left+(window.scrollX||window.pageXOffset)-this.origin.offset.x,this.origin.y=f.top+(window.scrollY||window.pageYOffset)-this.origin.offset.y;var g=d(a)||this.lastX,h=e(a)||this.lastY,i=g-this.origin.x,j=h-this.origin.y;b(c,i,j)};var q;try{parent.$&&parent.$.dragging&&(q=parent.$.dragging,q.windows.push(window))}catch(r){}q=a.dragging=q||new p;var s=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,t=!1;"undefined"==typeof s&&(s=function(a){this.targets=[],this.onAdded=function(b){a([{addedNodes:[b.target],removedNodes:[]}])},this.onRemoved=function(b){a([{addedNodes:[],removedNodes:[b.target]}])}},s.prototype.observe=function(a){a.addEventListener("DOMNodeInserted",this.onAdded),a.addEventListener("DOMNodeRemoved",this.onRemoved),this.targets.push(a)},s.prototype.disconnect=function(){for(var a;a=this.targets.shift();)a.removeEventListener("DOMNodeInserted",this.onAdded),a.removeEventListener("DOMNodeRemoved",this.onRemoved)},t=!!~navigator.appName.indexOf("Internet Explorer"));var u=function(a,b,c,d){function e(a,c){var d=[];return i(a).forEach(function(a){1===a.nodeType&&(k&&-1===j.targets.indexOf(a.parentNode)||(h(a,l)&&d.push(a),!k&&c&&i(a.querySelectorAll(b)).forEach(function(a){d.push(a)})))}),d}function f(a,b,c){c&&e(a,b).filter(function(a,b,c){return c.indexOf(a)===b}).forEach(function(a){c.call(a)})}function g(){j.disconnect();for(var a=0,b=p.length;b>a;++a){var e=o.indexOf(p[a]);e>-1&&(o.splice(e,1),p.splice(a--,1))}f(o,!(m&&t),c),f(p,!0,d),o.length=0,p.length=0,j.observe()}var j=this;this.targets=a instanceof NodeList?Array.prototype.slice.call(a):[a];var k=">"===b[0],l=k?b.substr(1):b,m=!1,n=null,o=[],p=[];this.observer=new s(function(a){a.forEach(function(a){o.push.apply(o,a.addedNodes),p.push.apply(p,a.removedNodes)}),n&&clearTimeout(n),n=setTimeout(g)}),c&&this.targets.forEach(function(a){f(a.children,!0,c)}),m=!0,this.observe()};u.prototype.disconnect=function(){this.observer.disconnect()},u.prototype.observe=function(){var a=this;this.targets.forEach(function(b){a.observer.observe(b,{childList:!0,subtree:!0})})};var v=function(b,c){this.id=o++,this.el=a(b),this.opts=c,this.cancel=c.handle!==!1};v.prototype.create=function(){this.el.on(k,a.proxy(this.start,this)).css("touch-action","double-tap-zoom").css("-ms-touch-action","double-tap-zoom"),q.on("dragging:stop",a.proxy(this.reset,this));var b=this;setTimeout(function(){b.el.trigger("draggable:create",b)})},v.prototype.destroy=function(){this.el.off(k,this.start),q.off("dragging:stop",this.reset)},v.prototype.enable=function(){this.opts.disabled=!1},v.prototype.disable=function(){this.opts.disabled=!0},v.prototype.start=function(b){if(this.opts.disabled)return!1;if("mousedown"===b.type&&1!==b.which)return!1;if(b=b.originalEvent||b,this.opts.cancel)for(var c=a(b.target);c[0]!==this.el[0];){if(c.is(this.opts.cancel))return;c=c.parent()}if(this.opts.handle){for(var c=a(b.target),d=!1;c[0]!==this.el[0];){if(c.is(this.opts.handle)){d=!0;break}c=c.parent()}if(!d)return}b.preventDefault();var e;this.el;if(this.opts.clone){"function"==typeof this.opts.clone?e=this.opts.clone.call(this.el):(e=this.el.clone(),this.opts.cloneClass&&e.addClass(this.opts.cloneClass));var f=this.el.position();e.css("position","absolute").css("left",f.left).css("top",f.top).width(this.el.width()).height(this.el.height()),e.insertAfter(this.el)}q.start(this,this.el,b,e),g(this.el,"draggable:start",b,{item:q.el})},v.prototype.reset=function(a,b){b===this.el[0]&&g(this.el,"draggable:stop",a,{item:q.el})};var w=function(b,c){this.id=o++,this.el=a(b),this.opts=c,this.accept=!1};w.prototype.create=function(){this.el.on("dragging:enter",a.proxy(this.enter,this)).on("dragging:leave",a.proxy(this.leave,this)).on("dragging:drop",a.proxy(this.drop,this)),q.on("dragging:start",a.proxy(this.activate,this)).on("dragging:stop",a.proxy(this.reset,this));var b=this;setTimeout(function(){b.el.trigger("droppable:create",b)})},w.prototype.destroy=function(){this.el.off("dragging:enter",this.enter).off("dragging:leave",this.leave).off("dragging:drop",this.drop)},w.prototype.enable=function(){this.opts.disabled=!1},w.prototype.disable=function(){this.opts.disabled=!0},w.prototype.activate=function(a){if(this.accept=q.parent.opts.connectWith&&this.el.is(q.parent.opts.connectWith),!this.accept){var b="*"===this.opts.accept||("function"==typeof this.opts.accept?this.opts.accept.call(this.el[0],q.el):q.el.is(this.opts.accept));"default"!==this.opts.scope?(this.accept=q.parent.opts.scope===this.opts.scope,this.accept||"*"===this.opts.accept||(this.accept=b)):this.accept=b}this.accept&&(this.opts.activeClass&&this.el.addClass(this.opts.activeClass),g(this.el,"droppable:activate",a,{item:q.el}))},w.prototype.reset=function(a){this.accept&&(this.opts.activeClass&&this.el.removeClass(this.opts.activeClass),this.opts.hoverClass&&this.el.removeClass(this.opts.hoverClass),g(this.el,"droppable:deactivate",a,{item:q.el}))},w.prototype.enter=function(a){return this.opts.disabled?!1:(a.stopPropagation(),q.placeholder&&q.placeholder.hide(),void(this.accept&&(this.opts.hoverClass&&this.el.addClass(this.opts.hoverClass),g(this.el,"droppable:over",a,{item:q.el}))))},w.prototype.leave=function(a){return this.opts.disabled?!1:(this.opts.hoverClass&&this.accept&&this.el.removeClass(this.opts.hoverClass),void g(this.el,"droppable:out",a,{item:q.el}))},w.prototype.drop=function(b){if(this.opts.disabled||!this.accept)return!1;if(q.el){var c=q.el,d="function"==typeof this.opts.receiveHandler&&this.opts.receiveHandler,e={item:c},f=null;q.handle&&(e.helper=q.handle,d||(f=e.clone=q.el.clone()));var h=g(this.el,"droppable:drop",b,e);h.isDefaultPrevented()||(d?d.call(this.el,e):a(this.el).append(f||q.el))}};var x=function(b,c){this.id=o++,this.el=b,this.opts=c;var d=this.opts.placeholderTag;if(!d)try{d=this.el.find(this.opts.items)[0].tagName}catch(e){d=/^ul|ol$/i.test(this.el[0].tagName)?"li":"div"}this.placeholder=a("<"+d+' id="__ph'+this.id+'" class="'+this.opts.placeholder+'" />'),this.accept=this.index=this.direction=null};x.prototype.create=function(){this.el.on(k,this.opts.items,a.proxy(this.start,this)).on("dragging:enter",this.opts.items,a.proxy(this.enter,this)).on("dragging:diverted",this.opts.items,a.proxy(this.diverted,this)).on("dragging:drop",this.opts.items,a.proxy(this.drop,this)),a(this.el).find(this.opts.items).css("touch-action","double-tap-zoom").css("-ms-touch-action","double-tap-zoom"),this.el.on("dragging:enter",a.proxy(this.enter,this)).on("dragging:diverted",a.proxy(this.diverted,this)).on("dragging:drop",a.proxy(this.drop,this)),q.on("dragging:start",a.proxy(this.activate,this)).on("dragging:stop",a.proxy(this.reset,this));var b=this;setTimeout(function(){
b.el.trigger("sortable:create",b)}),this.observer=new u(this.el[0],this.opts.items,function(){},function(){if(!(this===b.placeholder[0]||q.el&&this===q.el[0])){var c=a(this);c.css("touch-action","double-tap-zoom").css("-ms-touch-action","double-tap-zoom"),b.el.trigger("sortable:change",{item:c}),b.el.trigger("sortable:update",{item:c,index:-1})}})},x.prototype.destroy=function(){this.el.off(k,this.opts.items,this.start).off("dragging:enter",this.opts.items,this.enter).off("dragging:diverted",this.opts.items,this.diverted).off("dragging:drop",this.opts.items,this.drop),this.el.off("dragging:enter",this.enter).off("dragging:diverted",this.diverted).off("dragging:drop",this.drop),this.observer.disconnect()},x.prototype.enable=function(){this.opts.disabled=!1},x.prototype.disable=function(){this.opts.disabled=!0},x.prototype.activate=function(a){this.isEmpty=0===this.el.find(this.opts.items).length,this.accept=q.parent.id===this.id,!this.accept&&q.parent.opts.connectWith&&(this.accept=this.el.is(q.parent.opts.connectWith)),this.accept&&(this.accept=q.parent.id===this.id||"*"===this.opts.accept||("function"==typeof this.opts.accept?this.opts.accept.call(this.el[0],q.el):q.el.is(this.opts.accept)),this.accept&&(this.opts.activeClass&&this.el.addClass(this.opts.activeClass),g(this.el,"sortable:activate",a,{item:q.el})))},x.prototype.reset=function(a){this.accept&&(this.opts.activeClass&&this.el.removeClass(this.opts.activeClass),g(this.el,"sortable:deactivate",a,{item:q.el}),null!==this.index&&(g(this.el,"sortable:beforeStop",a,{item:q.el}),g(this.el,"sortable:stop",a,{item:q.el}),this.index=null))},x.prototype.indexOf=function(a){return this.el.find(this.opts.items+", #"+this.placeholder.attr("id")).index(a)},x.prototype.start=function(b){if(!this.opts.disabled&&!q.el){if("mousedown"===b.type&&1!==b.which)return!1;if(this.opts.cancel)for(var c=a(b.target);c[0]!==this.el[0];){if(c.is(this.opts.cancel))return;c=c.parent()}if(this.opts.handle){for(var c=a(b.target),d=!1;c[0]!==this.el[0];){if(c.is(this.opts.handle)){d=!0;break}c=c.parent()}if(!d)return}if(b.stopPropagation(),b.preventDefault(),q.start(this,a(b.currentTarget),b),this.index=this.indexOf(q.el),q.el.before(q.placeholder=this.placeholder.show()),null!==this.index){var e=q.el.outerHeight?q.el.outerHeight():q.el.height();q.css("margin-bottom",-e)}this.opts.forcePlaceholderSize&&(this.placeholder.height(parseFloat(q.el.css("height"))),this.placeholder.width(parseFloat(q.el.css("width")))),q.adjustPlacement(b),g(this.el,"sortable:start",b,{item:q.el})}},x.prototype.enter=function(b){if(this.accept&&!this.opts.disabled){b.stopPropagation();var c=b.currentTarget,d=c===this.el[0];c!==this.placeholder[0]&&(c=a(c),d&&!this.isEmpty&&this.placeholder.parent().length||(q.placeholder=this.placeholder,this.opts.forcePlaceholderSize&&(this.placeholder.height(parseFloat(q.el.css("height"))),this.placeholder.width(parseFloat(q.el.css("width")))),d?(this.el.append(this.placeholder),this.el.trigger("sortable:change",{item:q.el})):this.diverted(b)))}},x.prototype.diverted=function(b){if(this.accept&&!this.opts.disabled){b.stopPropagation();var c=a(b.currentTarget),d=c[0]===this.el[0];d||(q.placeholder=this.placeholder,this.direction=this.indexOf(this.placeholder.show())<this.indexOf(c)?"down":"up",c["down"===this.direction?"after":"before"](this.placeholder),q.adjustPlacement(b),this.el.trigger("sortable:change",{item:q.el}))}},x.prototype.drop=function(a){if(this.accept&&!this.opts.disabled&&(a.stopPropagation(),a.preventDefault(),q.el&&this.placeholder.parent().length)){g(this.el,"sortable:beforeStop",a,{item:q.el}),this.observer.disconnect();var b=this.indexOf(this.placeholder);b>this.index&&b--;var c;c=null===this.index?this.opts.receiveHandler:this.opts.updateHandler||this.opts.updatePosition;var d=q.el;"function"==typeof c?c.call(this.el,{item:q.el,index:b}):(q.handle&&(d=q.el.clone()),d.insertBefore(this.placeholder)),null===this.index&&g(this.el,"sortable:receive",a,{item:d}),b!==this.index&&this.el.trigger("sortable:update",{item:d,index:b}),g(this.el,"sortable:stop",a,{item:d}),this.index=null,this.observer.observe(),q.stop(a)}},x.prototype.toArray=function(b){b||(b={});var c=b.attribute||"id",d=[];return this.el.find(this.opts.items).each(function(){d.push(a(this).prop(c))}),d},a.fn.draggable=j(v,"draggable",{cancel:"input, textarea, button, select, option",connectWith:!1,cursor:"auto",disabled:!1,handle:!1,initialized:!1,clone:!1,cloneClass:"",scope:"default"}),a.fn.droppable=j(w,"droppable",{accept:"*",activeClass:"",disabled:!1,hoverClass:"",initialized:!1,scope:"default",receiveHandler:null}),a.fn.sortable=j(x,"sortable",{accept:"*",activeClass:"",cancel:"input, textarea, button, select, option",connectWith:!1,disabled:!1,forcePlaceholderSize:!1,handle:!1,initialized:!1,items:"li, div",placeholder:"placeholder",placeholderTag:null,updateHandler:null,receiveHandler:null})}(window.Zepto||window.jQuery)},{}],15:[function(a,b,c){function d(a,b){try{s.isfun("browser.app.getGeoLocationWithAlert")?browser.app.getGeoLocationWithAlert(function(c){"true"==c.ret?a(c):e(a,b)},function(){e(a,b)}):browser.app.getGeoLocation(function(c){"true"==c.ret?a(c):e(a,b)},function(){e(a,b)})}catch(c){e(a,b)}}function e(a,b){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(c){c.coords?a&&a(c.coords):b&&b()},function(a){b&&b()}):b&&b()}function f(a){q.post("/index?action=ajaxStat",{click:a})}function g(a){if(!a||"1"===a)return 1;var b;return window.cityList&&window.cityList.PROVENCELIST&&window.cityList.PROVENCELIST.some(function(c){c&&c.CITYS&&c.CITYS.some(function(c){return c.ID===a?(b=c,!0):c.COUNTYS&&c.COUNTYS.some(function(c){return c.ID===a?(b=c,!0):void 0})})}),!b&&window.intelCitys&&window.intelCitys.some(function(c){return c.ID===a?(b=c,!0):void 0}),b}function h(a){for(var b=r.get("citybid").split("|"),c=0;c<b.length;c++)if(a==b[c])return!0}function i(a){var b=a.split("|");if(k()){if(b.length>5)return!0}else if(b.length>=5)return!0}function j(a,b,c){i(a)?(q(b).hide(),q(c).show()):(q(c).hide(),q(b).show())}function k(){for(var a=r.get("citybid").split("|"),b=0;b<a.length;b++)if("1"===a[b])return!0}function l(){var a=r.get("citybid").split("|");if(a.length>1){var b=q.map(a,function(a,b){return"1"!=a?a:void 0});return b}return a}function m(a){var b,c=r.get("citybid").split("|"),d=q.map(c,function(b,c){return b!=a?b:void 0});return b=d.length>0?"1|"+d.join("|"):"1"}function n(){var a=r.get("citybid").split("|");return 1==a.length&&"1"==a[0]?!1:!0}function o(a){if(void 0!=a){var b=a.split("|"),c=q.map(b,function(a,b){return"undefined"!=a?a:void 0});return c.join("|")}}function p(a,b){if(a){var c=400;(!b||c>b)&&(b=c),window.setTimeout(function(){window.location.hash=a},b)}}var q=a("zepto"),r=(a("when"),a("../lib/storage"),a("../lib/cookie")),s=a("../lib/common");a("../lib/flexible"),b.exports=c={getGps:d,ajaxStat:f,getCityInfo:g,checkCityList:h,getUserCityList:i,checkUserGPSInfo:k,filterUserGPSCity:l,compareUsrGPSCity:m,checkUserCurrentCity:n,handleEditCitylist:o,showContainer:j,openHash:p},document.addEventListener("touchstart",function(){},!0)},{"../lib/common":10,"../lib/cookie":11,"../lib/flexible":12,"../lib/storage":13,when:43,zepto:44}],16:[function(a,b,c){function d(a){h&&Object.getOwnPropertyNames(h).forEach(function(b){if(b==a)return!0;var c=h[b];c&&c.destroy&&c.destroy()})}var e=a("zepto"),f=a("backbone"),g=a("../lib/common"),h=window.controllers={};a("./index"),a("./multiSetting"),a("./searchSetting"),a("./editSetting");var i=e("[data-page]");b.exports=c={start:function(){new(f.Router.extend({routes:{"":"pageload","p=:view":"pageload","*error":"loaderror"},pageload:function(a){var b=null==a?"index":g.getHashString("p"),c=h[b];d(b),c&&c.initialize&&(c.initialize(),setTimeout(scrollTo,0,0,1)),c&&c.bindEvent&&c.bindEvent()},loaderror:function(){i.hide()}})),f.history.start()}}},{"../lib/common":10,"./editSetting":17,"./index":18,"./multiSetting":19,"./searchSetting":20,backbone:21,zepto:44}],17:[function(a,b,c){function d(){var a=h.filterUserGPSCity(),b=a.map(function(a){return h.getCityInfo(a)});g("#editSetting").html(m(b)),g("#editCityList").sortable({cancel:"i"}).on("sortable:stop",function(a){for(var b=g("#editCityList").children("li"),c="",d=0;d<b.length;d++)c+=g(b[d]).data("citygbid")+"|";h.checkUserGPSInfo()&&(c="1|"+c),l=c.substring(0,c.length-1)}),g("#loadingContainer").hide()}function e(){var a="",b=g("#editCityList").children("li");if(h.checkUserGPSInfo()&&(a="1|"+a),b.length>1){for(var c=0;c<b.length;c++)a+=g(b[c]).data("citygbid")+"|";l=a.substring(0,a.length-1)}else a+=g(b[0]).data("citygbid"),l=a.toString()}function f(a){g.ajax({type:"POST",url:"/index?action=updateCitys",timeout:1e4,dataType:"json",data:{citybid:a},success:function(b){if(b&&0==b.ret){k.set("citybid",a),k.set("updatecity","1");try{i.g_push(!0,a,null,null,k.get("ip"),!0,!1,k.get("cardId"))}catch(c){console.log(c)}}}})}var g=a("zepto"),h=a("../lib/utils"),i=a("../lib/common"),j=a("underscore"),k=a("../lib/cookie");a("../lib/touch-dnd");var l,m=j.template(a("../../handlebars/editCity.html")),n=g('[data-page="editSetting"]');g.extend(controllers,{editSetting:{container:n,initialize:function(){this.container.removeClass("hidden"),d()},bindEvent:function(){n.on("tap","#back",function(){h.openHash("p=multiSetting",100)}),n.on("tap","#saveCity",function(){var a=h.handleEditCitylist(l)?h.handleEditCitylist(l):k.get("citybid");k.set("citybid",a),f(a),l=void 0,h.openHash("p=multiSetting",100)}),n.on("tap","li > i",function(){var a=g(this).parent(),b=g("#editCityList").children("li");h.checkUserGPSInfo()?(1===b.length&&g("#editCityList").html("<li>目前没有可编辑城市！</li>"),a.remove()):b.length>1?a.remove():g(".mod-alert").removeClass("hidden"),e()}),n.on("tap",".mod-alert .btn-group",function(){g(".mod-alert").addClass("hidden")})},destroy:function(){n.off("tap","#back").off("tap","#saveCity").off("tap","li > i").off("tap",".mod-alert .btn-group"),this.container.addClass("hidden")}}})},{"../../handlebars/editCity.html":2,"../lib/common":10,"../lib/cookie":11,"../lib/touch-dnd":14,"../lib/utils":15,underscore:25,zepto:44}],18:[function(a,b,c){function d(){for(var a=m.get("citybid").split("|"),b=(k("#citybid").data("citybid"),localStorage.getItem("updatecity")),c=0;c<a.length;c++)"1"==a[c]&&(s=c,n.getGps(h));if("1"===b){m.set("updatecity","0");var d=a.map(function(a){return"1"===a?{citybid:"",latitude:m.get("autoLatitude")||0,longitude:m.get("autoLongitude")||0}:{citybid:a,latitude:0,longitude:0}});i(d)}else e()}function e(){for(var a=k(".graph").children("div").children("canvas"),b=0;b<a.length;b++){var c=k(a[b]);if(c.data("temp")){var d=c.data("temp").split("|").map(function(a){return a.split(":").map(function(a){return+a})});"1"!=c.data("finished")&&j(c.get(0),d),c.data("finished",1)}}g()}function f(a,b){b=b>0?b:0;for(var c=a.data[b].weather.future.length,d="",e=k(".graph").children("div").children("canvas"),f=0;c>f;f++)d+=a.data[b].weather.future[f].lowT+":"+a.data[b].weather.future[f].hightT+"|";var g=d.substring(0,d.length-1).split("|").map(function(a){return a.split(":").map(function(a){return+a})}),h=k(e[b]);1!=h.data("finished")&&j(h.get(0),g),h.data("finished",1)}function g(a){var b=m.get("citybid").split("|");k("#banner_slider").find(".slide-item").length>1&&p(k("#banner_slider").get(0),{speed:200,continuous:!1,disableScroll:!1,stopPropagation:!1,callback:function(c,d){k(".city-indicator").find(".city-indicator li").removeClass("active").get(c).classList.add("active"),t=c,a&&f(a,c),0===t&&"1"===b[t]?k("#gpsIcon").removeClass().addClass("G-ico G-ico-location"):k("#gpsIcon").removeClass().addClass("hidden"),k("#userCityName").text(k(k("#banner_slider").find(".slide-item").get(c)).data("cityname")),k("#currentCitybgClass").removeClass(),k("#currentCitybgClass").addClass("mod-weather2 "+k(k("#banner_slider").find(".slide-item").get(c)).data("bgclass"))}})}function h(a){a&&k.post("/index?action=getCity",{longitude:a.longitude||0,latitude:a.latitude||0},function(b){m.set("autoLongitude",a.longitude),m.set("autoLatitude",a.latitude),b&&0===b.ret&&b.data&&b.data.gbid!=k(k("#banner_slider").find(".slide-item").get(s)).data("cityid")?i({citylist:[{citybid:" ",longitude:a.longitude,latitude:a.latitude}]}):o.g_push(!0,b.data.gbid,null,null,m.get("ip"),!0,!1,m.get("cardId"))},"json")}function i(a){k.post("/index?action=getIndexData",{citylist:a},function(a){if(a){if(0===a.ret)if(u.html(q(a)),0==t){f(a,0),g(a);var b=m.get("citybid").split("|");0===t&&"1"===b[t]?k("#gpsIcon").removeClass().addClass("G-ico G-ico-location"):k("#gpsIcon").removeClass().addClass("hidden")}else g(a);else 1===a.ret&&b&&u.html(r(a));o.g_push(!0,a.data.citybid,null,null,m.get("ip"),!0,!1,m.get("cardId"))}},"json")}function j(a,b){function c(a){for(var b=.4,c=0,d=a.length-2,e=[];d>c;c++){var f=a[c],g=a[c+1],h=a[c+2],i=new u(f.x-g.x,f.y-g.y),j=new u(h.x-g.x,h.y-g.y),k=i.length(),l=j.length(),m=i.normalize().add(j.normalize());m=0==m.x.toFixed(4)&&0==m.x.toFixed(4)?new u(i.y,-i.x):m,m=m.normalize();var n=new u(m.y,-1*m.x),o=new u(-1*m.y,m.x);if(n.angle(i)<90){var p=n.multiply(k*b).add(g),q=o.multiply(l*b).add(g);e.push(p,q)}else{var p=n.multiply(l*b).add(g),q=o.multiply(k*b).add(g);e.push(q,p)}}return e}function d(a,b){var d=c(a),e=a.length;b.beginPath(),b.moveTo(a[0].x,a[0].y),b.bezierCurveTo(a[0].x,a[0].y,d[0].x,d[0].y,a[1].x,a[1].y),b.strokeStyle="white",b.stroke();for(var f=1,g=e-2;g>f;f++)b.beginPath(),b.moveTo(a[f].x,a[f].y),b.bezierCurveTo(d[2*f-1].x,d[2*f-1].y,d[2*f].x,d[2*f].y,a[f+1].x,a[f+1].y),b.strokeStyle="white",b.stroke();var h=d.length;b.beginPath(),b.moveTo(a[e-2].x,a[e-2].y),b.bezierCurveTo(d[h-1].x,d[h-1].y,a[e-1].x,a[e-1].y,a[e-1].x,a[e-1].y),b.strokeStyle="white",b.stroke()}var e,f,g,h,i,j,k,l=a.getContext("2d"),m=a.width/(b.length-1),n=(a.width-47)/(b.length-1),o=ymax=(b[0][0]+b[0][1])/2,p=a.height-110,q=0,r=b.length,s=new Array,t={};for(l.beginPath(),q=0;r>q;q++)g=(b[q][0]+b[q][1])/2,o=o>g?g:o,ymax=g>ymax?g:ymax;for(q=0;r>q;q++)e=m*q,h=b[q],f=p*(1-((h[1]+h[0])/2-o)/(ymax-o))+55,t={x:e,y:f},s.push(t);var u=function(a,b){this.x=a,this.y=b};for(u.prototype={length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){var a=1/this.length();return new u(this.x*a,this.y*a)},add:function(a){return new u(this.x+a.x,this.y+a.y)},multiply:function(a){return new u(this.x*a,this.y*a)},dot:function(a){return this.x*a.x+this.y*a.y},angle:function(a){return 180*Math.acos(this.dot(a)/(this.length()*a.length()))/Math.PI}},d(s,l),q=0;r>q;q++)e=n*q,h=b[q],i=b[q+1],j=p*(1-((h[1]+h[0])/2-o)/(ymax-o))+90,k=p*(1-((h[1]+h[0])/2-o)/(ymax-o))+30,l.font="22px tagIcon",l.fillStyle="#ffffff",l.fillText(b[q][0]+"°",e,j),l.fillText(b[q][1]+"°",e,k)}var k=a("zepto"),l=a("underscore"),m=a("../lib/cookie"),n=a("../lib/utils"),o=a("../lib/common"),p=a("../lib/Swipe"),q=l.template(a("../../handlebars/weather.html")),r=l.template(a("../../handlebars/weatherfail.html")),s=0,t=0,u=k('[data-page="index"]');k.extend(controllers,{index:{container:u,initialize:function(){this.container.removeClass("hidden"),d()},bindEvent:function(){u.on("tap","[data-click]",function(){if("getWeatherById"!==o.getQueryString("action")||""===o.getQueryString("cityid")||"citybid"!==this.id){t=0;var a=k(this).data("click"),b=k(this).data("url"),c=k(this).data("hash"),d=k(k("#banner_slider").find(".slide-item").get(t)).data("cityname"),e=k(k("#banner_slider").find(".slide-item").get(t)).data("cityid");k.post("/index?action=ajaxStat",{click:a,citybid:e,cityname:d}),setTimeout(function(){c?location.hash=c:window.location=b},300)}})},destroy:function(){u.off("tap","[data-url]"),this.container.addClass("hidden")}}})},{"../../handlebars/weather.html":6,"../../handlebars/weatherfail.html":7,"../lib/Swipe":9,"../lib/common":10,"../lib/cookie":11,"../lib/utils":15,underscore:25,zepto:44}],19:[function(a,b,c){function d(){var a=j.filterUserGPSCity(),b=i("#settingCity"),c=m.get("citybid"),d=a.map(function(a){return j.getCityInfo(a)});j.checkUserCurrentCity()?b.html(n(d)):b.html(n()),j.showContainer(c,"#addCity","#addCity-disabled"),j.checkUserGPSInfo()?e():(i("#userCurrentCitys").hide(),i("#autoGps").removeClass("on")),i("#loadingContainer").hide()}function e(){var a,b=i("#userCurrentCitys"),c=function(a){i.ajax({type:"POST",url:"/index?action=getCity",dataType:"json",timeout:1e4,data:{flLngitude:a.longitude,latitude:a.latitude},success:function(c){if(c&&0===c.ret){if(g=c.data,h=g.gbid,g.longitude=a.longitude,g.latitude=a.latitude,i("#autoGps").addClass("on"),!j.checkUserGPSInfo()){var d=j.compareUsrGPSCity(g.gbid);m.set("citybid",d),f(d)}b.html("<span>"+g.cname+'<i class="G-ico G-ico-location"></i></span><i class="G-ico G-ico-reflesh"></i>').data("citygbid",g.gbid).data("longitude",g.longitude).data("latitude",g.latitude)}},error:function(a){b.html('<span>定位失败…<i class="G-ico G-ico-location"></i></span><i class="G-ico G-ico-reflesh"></i>')}})};g?(j.checkUserGPSInfo()||(a=j.compareUsrGPSCity(g.gbid),m.set("citybid",a),f(a)),i("#autoGps").addClass("on"),b.html("<span>"+g.cname+'<i class="G-ico G-ico-location"></i></span><i class="G-ico G-ico-reflesh"></i>').data("citygbid",g.gbid).data("longitude",g.longitude).data("latitude",g.latitude)):j.getGps(c,function(){b.addClass(".fail"),b.html('<span>定位失败…<i class="G-ico G-ico-location"></i></span><i class="G-ico G-ico-reflesh"></i>')})}function f(a){i.ajax({type:"POST",url:"/index?action=updateCitys",timeout:1e4,dataType:"json",data:{citybid:a},success:function(b){if(b&&0==b.ret){m.set("citybid",a),localStorage.setItem("updatecity","1");try{k.g_push(!0,a,null,null,m.get("ip"),!0,!1,m.get("cardId"))}catch(c){console.log(c)}}}})}var g,h,i=a("zepto"),j=a("../lib/utils"),k=a("../lib/common"),l=a("underscore"),m=a("../lib/cookie"),n=l.template(a("../../handlebars/multiCity.html")),o=i('[data-page="multiSetting"]');i.extend(controllers,{multiSetting:{container:o,initialize:function(){this.container.removeClass("hidden"),d()},bindEvent:function(){o.on("tap","#back",function(){localStorage.setItem("updatecity","1"),j.openHash("p=index",150)}),o.on("tap","#editCity",function(){j.checkUserCurrentCity()?j.openHash("p=editSetting",100):i(".mod-alert").removeClass("hidden")}),o.on("tap","#addCity",function(){j.openHash("p=searchSetting",100)}),o.on("tap",".mod-alert .btn-group",function(){i(".mod-alert").addClass("hidden")}),o.on("tap",".G-ico-reflesh",function(){e()}),o.on("tap",".btn-toggle",function(){if(j.checkUserCurrentCity())if(i("#autoGps").hasClass("on")){var a=j.filterUserGPSCity().join("|");m.set("citybid",a),f(a),i("#autoGps").removeClass("on"),i("#userCurrentCitys").hide()}else i("#userCurrentCitys").show(),e(),d();else i(".mod-alert").removeClass("hidden")})},destroy:function(){o.off("tap","#back").off("tap","#editCity").off("tap","#addCity").off("tap",".btn-toggle").off("tap",".mod-alert .btn-group"),this.container.addClass("hidden")}}})},{"../../handlebars/multiCity.html":4,"../lib/common":10,"../lib/cookie":11,"../lib/utils":15,underscore:25,zepto:44}],20:[function(a,b,c){function d(){j("#searchSetting").html(o()),j("#hotCitysList").empty().html(q(window.cityList))}function e(){var a=j("#userCurrentCitys"),b=function(b){j.ajax({type:"POST",url:"/index?action=getCity",dataType:"json",timeout:1e4,data:{flLngitude:b.longitude,latitude:b.latitude},success:function(a){a&&0===a.ret&&(h=a.data,i=h.gbid,h.longitude=b.longitude,h.latitude=b.latitude)},error:function(b){a.hide()}})};h?i=h.gbid:k.getGps(b)}function f(){var a=j(this),b=a.val();if(""===b)j("#hotCitysList").show(),j(".title-out-card").show(),j("#searchDataList").empty();else{j("#hotCitysList").hide(),j(".title-out-card").hide();var c,d,e=[];window.cityList&&window.cityList.PROVENCELIST&&window.cityList.PROVENCELIST.forEach(function(a){a&&a.CITYS&&a.CITYS.forEach(function(f){f&&(f.CH&&f.CH.indexOf(b)>-1||f.EN&&f.EN.indexOf(b)>-1)&&(c=f,c.provinceName=a.CH,e.push(c)),f&&f.COUNTYS&&f.COUNTYS.forEach(function(c){c&&(c.CH&&c.CH.indexOf(b)>-1||c.EN&&c.EN.indexOf(b)>-1)&&(d=c,d.provinceName=a.CH,d.cityName=f.CH,e.push(d))})})}),window.intelCitys&&window.intelCitys.forEach(function(a){a&&(a.CH&&a.CH.indexOf(b)>-1||a.EN&&a.EN.indexOf(b)>-1)&&e.push(a)}),e.length>0?(j(".mod-search--result-amount").addClass("hidden"),j("#searchDataList").empty().html(p(e))):(j(".mod-search--result-amount").removeClass("hidden"),j("#searchDataList").empty(),j(".mod-search--result-amount").text("未搜索到结果"))}}function g(a){j.ajax({type:"POST",url:"/index?action=updateCitys",timeout:1e4,dataType:"json",data:{citybid:a},success:function(b){if(b&&0==b.ret){n.set("citybid",a),n.set("updatecity","1");try{l.g_push(!0,a,null,null,n.get("ip"),!0,!1,n.get("cardId"))}catch(c){console.log(c)}}}})}var h,i,j=a("zepto"),k=a("../lib/utils"),l=a("../lib/common"),m=a("underscore"),n=a("../lib/cookie"),o=m.template(a("../../handlebars/addCity.html")),p=m.template(a("../../handlebars/searchResultCity.html")),q=m.template(a("../../handlebars/hotResultCity.html")),r=j('[data-page="searchSetting"]');j.extend(controllers,{searchSetting:{container:r,initialize:function(){this.container.removeClass("hidden"),d()},bindEvent:function(){r.on("tap","#cancleAddcity",function(){k.openHash("p=multiSetting",100)}),r.on("tap","#hotCitysList li, #searchDataList li",function(){var a,b=j(this),c=b.data("citygbid");j("#userInputCity").blur(),k.checkCityList(c)||(k.checkUserGPSInfo()?(e(),a=i==c?n.get("citybid"):n.get("citybid")+"|"+c):a=n.get("citybid")+"|"+c,n.set("citybid",a),g(a)),k.openHash("p=multiSetting",300)}).on("focus input","#userInputCity",f).on("blur","#userInputCity",function(){var a=j(this);""===a.val()&&j("#hotCitysList").empty().html(q(window.cityList))})},destroy:function(){r.off("tap","#cancleAddcity").off("tap","#hotCitysList li, #searchDataList li").off("tap","#userInputCity"),this.container.addClass("hidden"),j("#userInputCity").val("").blur()}}})},{"../../handlebars/addCity.html":1,"../../handlebars/hotResultCity.html":3,"../../handlebars/searchResultCity.html":5,"../lib/common":10,"../lib/cookie":11,"../lib/utils":15,underscore:25,zepto:44}],21:[function(a,b,c){(function(b){!function(d){var e="object"==typeof self&&self.self==self&&self||"object"==typeof b&&b.global==b&&b;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(a,b,c){e.Backbone=d(e,c,a,b)});else if("undefined"!=typeof c){var f,g=a("underscore");try{f=a("jquery")}catch(h){}d(e,c,g,f)}else e.Backbone=d(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(a,b,c,d){var e=a.Backbone,f=[].slice;b.VERSION="1.2.1",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var g=function(a,b,d){switch(a){case 1:return function(){return c[b](this[d])};case 2:return function(a){return c[b](this[d],a)};case 3:return function(a,e){return c[b](this[d],a,e)};case 4:return function(a,e,f){return c[b](this[d],a,e,f)};default:return function(){var a=f.call(arguments);return a.unshift(this[d]),c[b].apply(c,a)}}},h=function(a,b,d){c.each(b,function(b,e){c[e]&&(a.prototype[e]=g(b,e,d))})},i=b.Events={},j=/\s+/,k=function(a,b,d,e,f){var g,h=0;if(d&&"object"==typeof d){void 0!==e&&"context"in f&&void 0===f.context&&(f.context=e);for(g=c.keys(d);h<g.length;h++)b=a(b,g[h],d[g[h]],f)}else if(d&&j.test(d))for(g=d.split(j);h<g.length;h++)b=a(b,g[h],e,f);else b=a(b,d,e,f);return b};i.on=function(a,b,c){return l(this,a,b,c)};var l=function(a,b,c,d,e){if(a._events=k(m,a._events||{},b,c,{context:d,ctx:a,listening:e}),e){var f=a._listeners||(a._listeners={});f[e.id]=e}return a};i.listenTo=function(a,b,d){if(!a)return this;var e=a._listenId||(a._listenId=c.uniqueId("l")),f=this._listeningTo||(this._listeningTo={}),g=f[e];if(!g){var h=this._listenId||(this._listenId=c.uniqueId("l"));g=f[e]={obj:a,objId:e,id:h,listeningTo:f,count:0}}return l(a,b,d,this,g),this};var m=function(a,b,c,d){if(c){var e=a[b]||(a[b]=[]),f=d.context,g=d.ctx,h=d.listening;h&&h.count++,e.push({callback:c,context:f,ctx:f||g,listening:h})}return a};i.off=function(a,b,c){return this._events?(this._events=k(n,this._events,a,b,{context:c,listeners:this._listeners}),this):this},i.stopListening=function(a,b,d){var e=this._listeningTo;if(!e)return this;for(var f=a?[a._listenId]:c.keys(e),g=0;g<f.length;g++){var h=e[f[g]];if(!h)break;h.obj.off(b,d,this)}return c.isEmpty(e)&&(this._listeningTo=void 0),this};var n=function(a,b,d,e){if(a){var f,g=0,h=e.context,i=e.listeners;if(b||d||h){for(var j=b?[b]:c.keys(a);g<j.length;g++){b=j[g];var k=a[b];if(!k)break;for(var l=[],m=0;m<k.length;m++){var n=k[m];d&&d!==n.callback&&d!==n.callback._callback||h&&h!==n.context?l.push(n):(f=n.listening,f&&0===--f.count&&(delete i[f.id],delete f.listeningTo[f.objId]))}l.length?a[b]=l:delete a[b]}return c.size(a)?a:void 0}for(var o=c.keys(i);g<o.length;g++)f=i[o[g]],delete i[f.id],delete f.listeningTo[f.objId]}};i.once=function(a,b,d){var e=k(o,{},a,b,c.bind(this.off,this));return this.on(e,void 0,d)},i.listenToOnce=function(a,b,d){var e=k(o,{},b,d,c.bind(this.stopListening,this,a));return this.listenTo(a,e)};var o=function(a,b,d,e){if(d){var f=a[b]=c.once(function(){e(b,f),d.apply(this,arguments)});f._callback=d}return a};i.trigger=function(a){if(!this._events)return this;for(var b=Math.max(0,arguments.length-1),c=Array(b),d=0;b>d;d++)c[d]=arguments[d+1];return k(p,this._events,a,void 0,c),this};var p=function(a,b,c,d){if(a){var e=a[b],f=a.all;e&&f&&(f=f.slice()),e&&q(e,d),f&&q(f,[b].concat(d))}return a},q=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}};i.bind=i.on,i.unbind=i.off,c.extend(b,i);var r=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId(this.cidPrefix),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(r.prototype,i,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},matches:function(a){return!!c.iteratee(a,this)(this.attributes)},set:function(a,b,d){if(null==a)return this;var e;if("object"==typeof a?(e=a,d=b):(e={})[a]=b,d||(d={}),!this._validate(e,d))return!1;var f=d.unset,g=d.silent,h=[],i=this._changing;this._changing=!0,i||(this._previousAttributes=c.clone(this.attributes),this.changed={});var j=this.attributes,k=this.changed,l=this._previousAttributes;this.idAttribute in e&&(this.id=e[this.idAttribute]);for(var m in e)b=e[m],c.isEqual(j[m],b)||h.push(m),c.isEqual(l[m],b)?delete k[m]:k[m]=b,f?delete j[m]:j[m]=b;if(!g){h.length&&(this._pending=d);for(var n=0;n<h.length;n++)this.trigger("change:"+h[n],this,j[h[n]],d)}if(i)return this;if(!g)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b=this._changing?this._previousAttributes:this.attributes,d={};for(var e in a){var f=a[e];c.isEqual(b[e],f)||(d[e]=f)}return c.size(d)?d:!1},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=c.extend({parse:!0},a);var b=this,d=a.success;return a.success=function(c){var e=a.parse?b.parse(c,a):c;return b.set(e,a)?(d&&d.call(a.context,b,c,a),void b.trigger("sync",b,c,a)):!1},N(this,a),this.sync("read",this,a)},save:function(a,b,d){var e;null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0,parse:!0},d);var f=d.wait;if(e&&!f){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;var g=this,h=d.success,i=this.attributes;d.success=function(a){g.attributes=i;var b=d.parse?g.parse(a,d):a;return f&&(b=c.extend({},e,b)),b&&!g.set(b,d)?!1:(h&&h.call(d.context,g,a,d),void g.trigger("sync",g,a,d))},N(this,d),e&&f&&(this.attributes=c.extend({},i,e));var j=this.isNew()?"create":d.patch?"patch":"update";"patch"!==j||d.attrs||(d.attrs=e);var k=this.sync(j,this,d);return this.attributes=i,k},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=a.wait,f=function(){b.stopListening(),b.trigger("destroy",b,b.collection,a)};a.success=function(c){e&&f(),d&&d.call(a.context,b,c,a),b.isNew()||b.trigger("sync",b,c,a)};var g=!1;return this.isNew()?c.defer(a.success):(N(this,a),g=this.sync("delete",this,a)),e||f(),g},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||M();if(this.isNew())return a;var b=this.get(this.idAttribute);return a.replace(/[^\/]$/,"$&/")+encodeURIComponent(b)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.defaults({validate:!0},a))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var s={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};h(r,s,"attributes");var t=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},u={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};c.extend(t.prototype,i,{model:r,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,v))},remove:function(a,b){b=c.extend({},b);var d=!c.isArray(a);a=d?[a]:c.clone(a);var e=this._removeModels(a,b);return!b.silent&&e&&this.trigger("update",this,b),d?e[0]:e},set:function(a,b){b=c.defaults({},b,u),b.parse&&!this._isModel(a)&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:a.slice();var e,f,g,h,i,j=b.at;null!=j&&(j=+j),0>j&&(j+=this.length+1);for(var k=this.comparator&&null==j&&b.sort!==!1,l=c.isString(this.comparator)?this.comparator:null,m=[],n=[],o={},p=b.add,q=b.merge,r=b.remove,s=!k&&p&&r?[]:!1,t=!1,v=0;v<a.length;v++){if(g=a[v],h=this.get(g))r&&(o[h.cid]=!0),q&&g!==h&&(g=this._isModel(g)?g.attributes:g,b.parse&&(g=h.parse(g,b)),h.set(g,b),k&&!i&&h.hasChanged(l)&&(i=!0)),a[v]=h;else if(p){if(f=a[v]=this._prepareModel(g,b),!f)continue;m.push(f),this._addReference(f,b)}f=h||f,f&&(e=this.modelId(f.attributes),!s||!f.isNew()&&o[e]||(s.push(f),t=t||!this.models[v]||f.cid!==this.models[v].cid),o[e]=!0)}if(r){for(var v=0;v<this.length;v++)o[(f=this.models[v]).cid]||n.push(f);n.length&&this._removeModels(n,b)}if(m.length||t)if(k&&(i=!0),this.length+=m.length,null!=j)for(var v=0;v<m.length;v++)this.models.splice(j+v,0,m[v]);else{s&&(this.models.length=0);for(var w=s||m,v=0;v<w.length;v++)this.models.push(w[v])}if(i&&this.sort({silent:!0}),!b.silent){for(var x=null!=j?c.clone(b):b,v=0;v<m.length;v++)null!=j&&(x.index=j+v),(f=m[v]).trigger("add",f,this,x);(i||t)&&this.trigger("sort",this,b),(m.length||n.length)&&this.trigger("update",this,b)}return d?a[0]:a},reset:function(a,b){b=b?c.clone(b):{};for(var d=0;d<this.models.length;d++)this._removeReference(this.models[d],b);
return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a)},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a)},slice:function(){return f.apply(this.models,arguments)},get:function(a){if(null==a)return void 0;var b=this.modelId(this._isModel(a)?a.attributes:a);return this._byId[a]||this._byId[b]||this._byId[a.cid]},at:function(a){return 0>a&&(a+=this.length),this.models[a]},where:function(a,b){var d=c.matches(a);return this[b?"find":"filter"](function(a){return d(a.attributes)})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=c.extend({parse:!0},a);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b.call(a.context,d,c,a),d.trigger("sync",d,c,a)},N(this,a),this.sync("read",this,a)},create:function(a,b){b=b?c.clone(b):{};var d=b.wait;if(a=this._prepareModel(a,b),!a)return!1;d||this.add(a,b);var e=this,f=b.success;return b.success=function(a,b,c){d&&e.add(a,c),f&&f.call(c.context,a,b,c)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(a){return a[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(this._isModel(a))return a.collection||(a.collection=this),a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_removeModels:function(a,b){for(var c=[],d=0;d<a.length;d++){var e=this.get(a[d]);if(e){var f=this.indexOf(e);this.models.splice(f,1),this.length--,b.silent||(b.index=f,e.trigger("remove",e,this,b)),c.push(e),this._removeReference(e,b)}}return c.length?c:!1},_isModel:function(a){return a instanceof r},_addReference:function(a,b){this._byId[a.cid]=a;var c=this.modelId(a.attributes);null!=c&&(this._byId[c]=a),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){delete this._byId[a.cid];var c=this.modelId(a.attributes);null!=c&&delete this._byId[c],this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if("add"!==a&&"remove"!==a||c===this){if("destroy"===a&&this.remove(b,d),"change"===a){var e=this.modelId(b.previousAttributes()),f=this.modelId(b.attributes);e!==f&&(null!=e&&delete this._byId[e],null!=f&&(this._byId[f]=b))}this.trigger.apply(this,arguments)}}});var w={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:2,contains:2,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3};h(t,w,"models");var x=["groupBy","countBy","sortBy","indexBy"];c.each(x,function(a){c[a]&&(t.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)})});var y=b.View=function(a){this.cid=c.uniqueId("view"),c.extend(this,c.pick(a,A)),this._ensureElement(),this.initialize.apply(this,arguments)},z=/^(\S+)\s*(.*)$/,A=["model","collection","el","id","attributes","className","tagName","events"];c.extend(y.prototype,i,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(a){return this.undelegateEvents(),this._setElement(a),this.delegateEvents(),this},_setElement:function(a){this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0]},delegateEvents:function(a){if(a||(a=c.result(this,"events")),!a)return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[d]),d){var e=b.match(z);this.delegate(e[1],e[2],c.bind(d,this))}}return this},delegate:function(a,b,c){return this.$el.on(a+".delegateEvents"+this.cid,b,c),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(a,b,c){return this.$el.off(a+".delegateEvents"+this.cid,b,c),this},_createElement:function(a){return document.createElement(a)},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"));else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className")),this.setElement(this._createElement(c.result(this,"tagName"))),this._setAttributes(a)}},_setAttributes:function(a){this.$el.attr(a)}}),b.sync=function(a,d,e){var f=B[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||M()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1);var i=e.error;e.error=function(a,b,c){e.textStatus=b,e.errorThrown=c,i&&i.call(e.context,a,b,c)};var j=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,j,e),j};var B={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var C=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},D=/\((.*?)\)/g,E=/(\(\?)?:\w+/g,F=/\*\w+/g,G=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(C.prototype,i,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g,d)!==!1&&(f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g))}),this},execute:function(a,b,c){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(G,"\\$&").replace(D,"(?:$1)?").replace(E,function(a,b){return b?a:"([^/?]+)"}).replace(F,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var H=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,J=/^\/+|\/+$/g,K=/#.*$/;H.started=!1,c.extend(H.prototype,i,{interval:50,atRoot:function(){var a=this.location.pathname.replace(/[^\/]$/,"$&/");return a===this.root&&!this.getSearch()},matchRoot:function(){var a=this.decodeFragment(this.location.pathname),b=a.slice(0,this.root.length-1)+"/";return b===this.root},decodeFragment:function(a){return decodeURI(a.replace(/%25/g,"%2525"))},getSearch:function(){var a=this.location.href.replace(/#.*/,"").match(/\?.+/);return a?a[0]:""},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getPath:function(){var a=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===a.charAt(0)?a.slice(1):a},getFragment:function(a){return null==a&&(a=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),a.replace(I,"")},start:function(a){if(H.started)throw new Error("Backbone.history has already been started");if(H.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(J,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var b=this.root.slice(0,-1)||"/";return this.location.replace(b+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var d=document.body,e=d.insertBefore(this.iframe,d.firstChild).contentWindow;e.document.open(),e.document.close(),e.location.hash="#"+this.fragment}var f=window.addEventListener||function(a,b){return attachEvent("on"+a,b)};return this._usePushState?f("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?f("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var a=window.removeEventListener||function(a,b){return detachEvent("on"+a,b)};this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&a("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),H.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getHash(this.iframe.contentWindow)),b===this.fragment?!1:(this.iframe&&this.navigate(b),void this.loadUrl())},loadUrl:function(a){return this.matchRoot()?(a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})):!1},navigate:function(a,b){if(!H.started)return!1;b&&b!==!0||(b={trigger:!!b}),a=this.getFragment(a||"");var c=this.root;(""===a||"?"===a.charAt(0))&&(c=c.slice(0,-1)||"/");var d=c+a;if(a=this.decodeFragment(a.replace(K,"")),this.fragment!==a){if(this.fragment=a,this._usePushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,d);else{if(!this._wantsHashChange)return this.location.assign(d);if(this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getHash(this.iframe.contentWindow)){var e=this.iframe.contentWindow;b.replace||(e.document.open(),e.document.close()),this._updateHash(e.location,a,b.replace)}}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new H;var L=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};r.extend=t.extend=C.extend=y.extend=H.extend=L;var M=function(){throw new Error('A "url" property or function must be specified')},N=function(a,b){var c=b.error;b.error=function(d){c&&c.call(b.context,a,d,b),a.trigger("error",a,d,b)}};return b})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{jquery:23,underscore:22}],22:[function(a,b,c){(function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=v(d,f,4);var g=!C(c)&&u.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function d(a){return function(b,c,d){c=w(c,d);for(var e=B(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function e(a,b,c){return function(d,e,f){var g=0,h=B(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(m.call(d,g,h),u.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&h>f;f+=a)if(d[f]===e)return f;return-1}}function f(a,b){var c=H.length,d=a.constructor,e=u.isFunction(d)&&d.prototype||j,f="constructor";for(u.has(a,f)&&!u.contains(b,f)&&b.push(f);c--;)f=H[c],f in a&&a[f]!==e[f]&&!u.contains(b,f)&&b.push(f)}var g=this,h=g._,i=Array.prototype,j=Object.prototype,k=Function.prototype,l=i.push,m=i.slice,n=j.toString,o=j.hasOwnProperty,p=Array.isArray,q=Object.keys,r=k.bind,s=Object.create,t=function(){},u=function(a){return a instanceof u?a:this instanceof u?void(this._wrapped=a):new u(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=u),c._=u):g._=u,u.VERSION="1.8.3";var v=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},w=function(a,b,c){return null==a?u.identity:u.isFunction(a)?v(a,b,c):u.isObject(a)?u.matcher(a):u.property(a)};u.iteratee=function(a,b){return w(a,b,1/0)};var x=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},y=function(a){if(!u.isObject(a))return{};if(s)return s(a);t.prototype=a;var b=new t;return t.prototype=null,b},z=function(a){return function(b){return null==b?void 0:b[a]}},A=Math.pow(2,53)-1,B=z("length"),C=function(a){var b=B(a);return"number"==typeof b&&b>=0&&A>=b};u.each=u.forEach=function(a,b,c){b=v(b,c);var d,e;if(C(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=u.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},u.map=u.collect=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},u.reduce=u.foldl=u.inject=a(1),u.reduceRight=u.foldr=a(-1),u.find=u.detect=function(a,b,c){var d;return d=C(a)?u.findIndex(a,b,c):u.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},u.filter=u.select=function(a,b,c){var d=[];return b=w(b,c),u.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},u.reject=function(a,b,c){return u.filter(a,u.negate(w(b)),c)},u.every=u.all=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},u.some=u.any=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},u.contains=u.includes=u.include=function(a,b,c,d){return C(a)||(a=u.values(a)),("number"!=typeof c||d)&&(c=0),u.indexOf(a,b,c)>=0},u.invoke=function(a,b){var c=m.call(arguments,2),d=u.isFunction(b);return u.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},u.pluck=function(a,b){return u.map(a,u.property(b))},u.where=function(a,b){return u.filter(a,u.matcher(b))},u.findWhere=function(a,b){return u.find(a,u.matcher(b))},u.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},u.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(g>e||e===1/0&&f===1/0)&&(f=a,g=e)});return f},u.shuffle=function(a){for(var b,c=C(a)?a:u.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=u.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},u.sample=function(a,b,c){return null==b||c?(C(a)||(a=u.values(a)),a[u.random(a.length-1)]):u.shuffle(a).slice(0,Math.max(0,b))},u.sortBy=function(a,b,c){return b=w(b,c),u.pluck(u.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var D=function(a){return function(b,c,d){var e={};return c=w(c,d),u.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};u.groupBy=D(function(a,b,c){u.has(a,c)?a[c].push(b):a[c]=[b]}),u.indexBy=D(function(a,b,c){a[c]=b}),u.countBy=D(function(a,b,c){u.has(a,c)?a[c]++:a[c]=1}),u.toArray=function(a){return a?u.isArray(a)?m.call(a):C(a)?u.map(a,u.identity):u.values(a):[]},u.size=function(a){return null==a?0:C(a)?a.length:u.keys(a).length},u.partition=function(a,b,c){b=w(b,c);var d=[],e=[];return u.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},u.first=u.head=u.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:u.initial(a,a.length-b)},u.initial=function(a,b,c){return m.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},u.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:u.rest(a,Math.max(0,a.length-b))},u.rest=u.tail=u.drop=function(a,b,c){return m.call(a,null==b||c?1:b)},u.compact=function(a){return u.filter(a,u.identity)};var E=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=B(a);h>g;g++){var i=a[g];if(C(i)&&(u.isArray(i)||u.isArguments(i))){b||(i=E(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};u.flatten=function(a,b){return E(a,b,!1)},u.without=function(a){return u.difference(a,m.call(arguments,1))},u.uniq=u.unique=function(a,b,c,d){u.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=w(c,d));for(var e=[],f=[],g=0,h=B(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?u.contains(f,j)||(f.push(j),e.push(i)):u.contains(e,i)||e.push(i)}return e},u.union=function(){return u.uniq(E(arguments,!0,!0))},u.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=B(a);e>d;d++){var f=a[d];if(!u.contains(b,f)){for(var g=1;c>g&&u.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},u.difference=function(a){var b=E(arguments,!0,!0,1);return u.filter(a,function(a){return!u.contains(b,a)})},u.zip=function(){return u.unzip(arguments)},u.unzip=function(a){for(var b=a&&u.max(a,B).length||0,c=Array(b),d=0;b>d;d++)c[d]=u.pluck(a,d);return c},u.object=function(a,b){for(var c={},d=0,e=B(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},u.findIndex=d(1),u.findLastIndex=d(-1),u.sortedIndex=function(a,b,c,d){c=w(c,d,1);for(var e=c(b),f=0,g=B(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},u.indexOf=e(1,u.findIndex,u.sortedIndex),u.lastIndexOf=e(-1,u.findLastIndex),u.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var F=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=y(a.prototype),g=a.apply(f,e);return u.isObject(g)?g:f};u.bind=function(a,b){if(r&&a.bind===r)return r.apply(a,m.call(arguments,1));if(!u.isFunction(a))throw new TypeError("Bind must be called on a function");var c=m.call(arguments,2),d=function(){return F(a,d,b,this,c.concat(m.call(arguments)))};return d},u.partial=function(a){var b=m.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===u?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return F(a,c,this,this,f)};return c},u.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=u.bind(a[c],a);return a},u.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return u.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},u.delay=function(a,b){var c=m.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},u.defer=u.partial(u.delay,u,1),u.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:u.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=u.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},u.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=u.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=u.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},u.wrap=function(a,b){return u.partial(b,a)},u.negate=function(a){return function(){return!a.apply(this,arguments)}},u.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},u.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},u.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},u.once=u.partial(u.before,2);var G=!{toString:null}.propertyIsEnumerable("toString"),H=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];u.keys=function(a){if(!u.isObject(a))return[];if(q)return q(a);var b=[];for(var c in a)u.has(a,c)&&b.push(c);return G&&f(a,b),b},u.allKeys=function(a){if(!u.isObject(a))return[];var b=[];for(var c in a)b.push(c);return G&&f(a,b),b},u.values=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},u.mapObject=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},u.pairs=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},u.invert=function(a){for(var b={},c=u.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},u.functions=u.methods=function(a){var b=[];for(var c in a)u.isFunction(a[c])&&b.push(c);return b.sort()},u.extend=x(u.allKeys),u.extendOwn=u.assign=x(u.keys),u.findKey=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},u.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;u.isFunction(b)?(e=u.allKeys(g),d=v(b,c)):(e=E(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},u.omit=function(a,b,c){if(u.isFunction(b))b=u.negate(b);else{var d=u.map(E(arguments,!1,!1,1),String);b=function(a,b){return!u.contains(d,b)}}return u.pick(a,b,c)},u.defaults=x(u.allKeys,!0),u.create=function(a,b){var c=y(a);return b&&u.extendOwn(c,b),c},u.clone=function(a){return u.isObject(a)?u.isArray(a)?a.slice():u.extend({},a):a},u.tap=function(a,b){return b(a),a},u.isMatch=function(a,b){var c=u.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var I=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof u&&(a=a._wrapped),b instanceof u&&(b=b._wrapped);var e=n.call(a);if(e!==n.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(u.isFunction(g)&&g instanceof g&&u.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!I(a[i],b[i],c,d))return!1}else{var j,k=u.keys(a);if(i=k.length,u.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!u.has(b,j)||!I(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};u.isEqual=function(a,b){return I(a,b)},u.isEmpty=function(a){return null==a?!0:C(a)&&(u.isArray(a)||u.isString(a)||u.isArguments(a))?0===a.length:0===u.keys(a).length},u.isElement=function(a){return!(!a||1!==a.nodeType)},u.isArray=p||function(a){return"[object Array]"===n.call(a)},u.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},u.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){u["is"+a]=function(b){return n.call(b)==="[object "+a+"]"}}),u.isArguments(arguments)||(u.isArguments=function(a){return u.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(u.isFunction=function(a){return"function"==typeof a||!1}),u.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},u.isNaN=function(a){return u.isNumber(a)&&a!==+a},u.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===n.call(a)},u.isNull=function(a){return null===a},u.isUndefined=function(a){return void 0===a},u.has=function(a,b){return null!=a&&o.call(a,b)},u.noConflict=function(){return g._=h,this},u.identity=function(a){return a},u.constant=function(a){return function(){return a}},u.noop=function(){},u.property=z,u.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},u.matcher=u.matches=function(a){return a=u.extendOwn({},a),function(b){return u.isMatch(b,a)}},u.times=function(a,b,c){var d=Array(Math.max(0,a));b=v(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},u.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},u.now=Date.now||function(){return(new Date).getTime()};var J={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},K=u.invert(J),L=function(a){var b=function(b){return a[b]},c="(?:"+u.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};u.escape=L(J),u.unescape=L(K),u.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),u.isFunction(d)?d.call(a):d};var M=0;u.uniqueId=function(a){var b=++M+"";return a?a+b:b},u.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(a){return"\\"+O[a]};u.template=function(a,b,c){!b&&c&&(b=c),b=u.defaults({},b,u.templateSettings);var d=RegExp([(b.escape||N).source,(b.interpolate||N).source,(b.evaluate||N).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(P,Q),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,u)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},u.chain=function(a){var b=u(a);return b._chain=!0,b};var R=function(a,b){return a._chain?u(b).chain():b};u.mixin=function(a){u.each(u.functions(a),function(b){var c=u[b]=a[b];u.prototype[b]=function(){var a=[this._wrapped];return l.apply(a,arguments),R(this,c.apply(u,a))}})},u.mixin(u),u.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=i[a];u.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],R(this,c)}}),u.each(["concat","join","slice"],function(a){var b=i[a];u.prototype[a]=function(){return R(this,b.apply(this._wrapped,arguments))}}),u.prototype.value=function(){return this._wrapped},u.prototype.valueOf=u.prototype.toJSON=u.prototype.value,u.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return u})}).call(this)},{}],23:[function(a,b,c){},{}],24:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],25:[function(a,b,c){arguments[4][22][0].apply(c,arguments)},{dup:22}],26:[function(a,b,c){!function(a){"use strict";a(function(a){var b=a("./makePromise"),c=a("./Scheduler"),d=a("./env").asap;return b({scheduler:new c(d)})})}("function"==typeof define&&define.amd?define:function(c){b.exports=c(a)})},{"./Scheduler":27,"./env":39,"./makePromise":41}],27:[function(a,b,c){!function(a){"use strict";a(function(){function a(a){this._async=a,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var b=this;this.drain=function(){b._drain()}}return a.prototype.enqueue=function(a){this._queue[this._queueLen++]=a,this.run()},a.prototype.afterQueue=function(a){this._afterQueue[this._afterQueueLen++]=a,this.run()},a.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},a.prototype._drain=function(){for(var a=0;a<this._queueLen;++a)this._queue[a].run(),this._queue[a]=void 0;for(this._queueLen=0,this._running=!1,a=0;a<this._afterQueueLen;++a)this._afterQueue[a].run(),this._afterQueue[a]=void 0;this._afterQueueLen=0},a})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],28:[function(a,b,c){!function(a){"use strict";a(function(){function a(b){Error.call(this),this.message=b,this.name=a.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,a)}return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],29:[function(a,b,c){!function(a){"use strict";a(function(){function a(a,c){function d(b,d,f){var g=a._defer(),h=f.length,i=new Array(h);return e({f:b,thisArg:d,args:f,params:i,i:h-1,call:c},g._handler),g}function e(b,d){if(b.i<0)return c(b.f,b.thisArg,b.params,d);var e=a._handler(b.args[b.i]);e.fold(f,b,void 0,d)}function f(a,b,c){a.params[a.i]=b,a.i-=1,e(a,c)}return arguments.length<2&&(c=b),d}function b(a,b,c,d){try{d.resolve(a.apply(b,c))}catch(e){d.reject(e)}}return a.tryCatchResolve=b,a})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],30:[function(a,b,c){!function(a){"use strict";a(function(a){var b=a("../state"),c=a("../apply");return function(a){function d(b){function c(a){k=null,this.resolve(a)}function d(a){this.resolved||(k.push(a),0===--j&&this.reject(k))}for(var e,f,g=a._defer(),h=g._handler,i=b.length>>>0,j=i,k=[],l=0;i>l;++l)if(f=b[l],void 0!==f||l in b){if(e=a._handler(f),e.state()>0){h.become(e),a._visitRemaining(b,l,e);break}e.visit(h,c,d)}else--j;return 0===j&&h.reject(new RangeError("any(): array must not be empty")),g}function e(b,c){
function d(a){this.resolved||(k.push(a),0===--n&&(l=null,this.resolve(k)))}function e(a){this.resolved||(l.push(a),0===--f&&(k=null,this.reject(l)))}var f,g,h,i=a._defer(),j=i._handler,k=[],l=[],m=b.length>>>0,n=0;for(h=0;m>h;++h)g=b[h],(void 0!==g||h in b)&&++n;for(c=Math.max(c,0),f=n-c+1,n=Math.min(c,n),c>n?j.reject(new RangeError("some(): array must contain at least "+c+" item(s), but had "+n)):0===n&&j.resolve(k),h=0;m>h;++h)g=b[h],(void 0!==g||h in b)&&a._handler(g).visit(j,d,e,j.notify);return i}function f(b,c){return a._traverse(c,b)}function g(b,c){var d=s.call(b);return a._traverse(c,d).then(function(a){return h(d,a)})}function h(b,c){for(var d=c.length,e=new Array(d),f=0,g=0;d>f;++f)c[f]&&(e[g++]=a._handler(b[f]).value);return e.length=g,e}function i(a){return p(a.map(j))}function j(c){var d=a._handler(c);return 0===d.state()?o(c).then(b.fulfilled,b.rejected):(d._unreport(),b.inspect(d))}function k(a,b){return arguments.length>2?q.call(a,m(b),arguments[2]):q.call(a,m(b))}function l(a,b){return arguments.length>2?r.call(a,m(b),arguments[2]):r.call(a,m(b))}function m(a){return function(b,c,d){return n(a,void 0,[b,c,d])}}var n=c(a),o=a.resolve,p=a.all,q=Array.prototype.reduce,r=Array.prototype.reduceRight,s=Array.prototype.slice;return a.any=d,a.some=e,a.settle=i,a.map=f,a.filter=g,a.reduce=k,a.reduceRight=l,a.prototype.spread=function(a){return this.then(p).then(function(b){return a.apply(this,b)})},a}})}("function"==typeof define&&define.amd?define:function(c){b.exports=c(a)})},{"../apply":29,"../state":42}],31:[function(a,b,c){!function(a){"use strict";a(function(){function a(){throw new TypeError("catch predicate must be a function")}function b(a,b){return c(b)?a instanceof b:b(a)}function c(a){return a===Error||null!=a&&a.prototype instanceof Error}function d(a){return("object"==typeof a||"function"==typeof a)&&null!==a}function e(a){return a}return function(c){function f(a,c){return function(d){return b(d,c)?a.call(this,d):j(d)}}function g(a,b,c,e){var f=a.call(b);return d(f)?h(f,c,e):c(e)}function h(a,b,c){return i(a).then(function(){return b(c)})}var i=c.resolve,j=c.reject,k=c.prototype["catch"];return c.prototype.done=function(a,b){this._handler.visit(this._handler.receiver,a,b)},c.prototype["catch"]=c.prototype.otherwise=function(b){return arguments.length<2?k.call(this,b):"function"!=typeof b?this.ensure(a):k.call(this,f(arguments[1],b))},c.prototype["finally"]=c.prototype.ensure=function(a){return"function"!=typeof a?this:this.then(function(b){return g(a,this,e,b)},function(b){return g(a,this,j,b)})},c.prototype["else"]=c.prototype.orElse=function(a){return this.then(void 0,function(){return a})},c.prototype["yield"]=function(a){return this.then(function(){return a})},c.prototype.tap=function(a){return this.then(a)["yield"](this)},c}})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],32:[function(a,b,c){!function(a){"use strict";a(function(){return function(a){return a.prototype.fold=function(b,c){var d=this._beget();return this._handler.fold(function(c,d,e){a._handler(c).fold(function(a,c,d){d.resolve(b.call(this,c,a))},d,this,e)},c,d._handler.receiver,d._handler),d},a}})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],33:[function(a,b,c){!function(a){"use strict";a(function(a){var b=a("../state").inspect;return function(a){return a.prototype.inspect=function(){return b(a._handler(this))},a}})}("function"==typeof define&&define.amd?define:function(c){b.exports=c(a)})},{"../state":42}],34:[function(a,b,c){!function(a){"use strict";a(function(){return function(a){function b(a,b,d,e){return c(function(b){return[b,a(b)]},b,d,e)}function c(a,b,e,f){function g(f,g){return d(e(f)).then(function(){return c(a,b,e,g)})}return d(f).then(function(c){return d(b(c)).then(function(b){return b?c:d(a(c)).spread(g)})})}var d=a.resolve;return a.iterate=b,a.unfold=c,a}})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],35:[function(a,b,c){!function(a){"use strict";a(function(){return function(a){return a.prototype.progress=function(a){return this.then(void 0,void 0,a)},a}})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],36:[function(a,b,c){!function(a){"use strict";a(function(a){function b(a,b,d,e){return c.setTimer(function(){a(d,e,b)},b)}var c=a("../env"),d=a("../TimeoutError");return function(a){function e(a,c,d){b(f,a,c,d)}function f(a,b){b.resolve(a)}function g(a,b,c){var e="undefined"==typeof a?new d("timed out after "+c+"ms"):a;b.reject(e)}return a.prototype.delay=function(a){var b=this._beget();return this._handler.fold(e,a,void 0,b._handler),b},a.prototype.timeout=function(a,d){var e=this._beget(),f=e._handler,h=b(g,a,d,e._handler);return this._handler.visit(f,function(a){c.clearTimer(h),this.resolve(a)},function(a){c.clearTimer(h),this.reject(a)},f.notify),e},a}})}("function"==typeof define&&define.amd?define:function(c){b.exports=c(a)})},{"../TimeoutError":28,"../env":39}],37:[function(a,b,c){!function(a){"use strict";a(function(a){function b(a){throw a}function c(){}var d=a("../env").setTimer,e=a("../format");return function(a){function f(a){a.handled||(n.push(a),k("Potentially unhandled rejection ["+a.id+"] "+e.formatError(a.value)))}function g(a){var b=n.indexOf(a);b>=0&&(n.splice(b,1),l("Handled previous rejection ["+a.id+"] "+e.formatObject(a.value)))}function h(a,b){m.push(a,b),null===o&&(o=d(i,0))}function i(){for(o=null;m.length>0;)m.shift()(m.shift())}var j,k=c,l=c;"undefined"!=typeof console&&(j=console,k="undefined"!=typeof j.error?function(a){j.error(a)}:function(a){j.log(a)},l="undefined"!=typeof j.info?function(a){j.info(a)}:function(a){j.log(a)}),a.onPotentiallyUnhandledRejection=function(a){h(f,a)},a.onPotentiallyUnhandledRejectionHandled=function(a){h(g,a)},a.onFatalRejection=function(a){h(b,a.value)};var m=[],n=[],o=null;return a}})}("function"==typeof define&&define.amd?define:function(c){b.exports=c(a)})},{"../env":39,"../format":40}],38:[function(a,b,c){!function(a){"use strict";a(function(){return function(a){return a.prototype["with"]=a.prototype.withThis=function(a){var b=this._beget(),c=b._handler;return c.receiver=a,this._handler.chain(c,a),b},a}})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],39:[function(a,b,c){(function(c){!function(a){"use strict";a(function(a){function b(){return"undefined"!=typeof c&&"[object process]"===Object.prototype.toString.call(c)}function d(){return"function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver}function e(a){function b(){var a=c;c=void 0,a()}var c,d=document.createTextNode(""),e=new a(b);e.observe(d,{characterData:!0});var f=0;return function(a){c=a,d.data=f^=1}}var f,g="undefined"!=typeof setTimeout&&setTimeout,h=function(a,b){return setTimeout(a,b)},i=function(a){return clearTimeout(a)},j=function(a){return g(a,0)};if(b())j=function(a){return c.nextTick(a)};else if(f=d())j=e(f);else if(!g){var k=a,l=k("vertx");h=function(a,b){return l.setTimer(b,a)},i=l.cancelTimer,j=l.runOnLoop||l.runOnContext}return{setTimer:h,clearTimer:i,asap:j}})}("function"==typeof define&&define.amd?define:function(c){b.exports=c(a)})}).call(this,a("_process"))},{_process:24}],40:[function(a,b,c){!function(a){"use strict";a(function(){function a(a){var c="object"==typeof a&&null!==a&&a.stack?a.stack:b(a);return a instanceof Error?c:c+" (WARNING: non-Error used)"}function b(a){var b=String(a);return"[object Object]"===b&&"undefined"!=typeof JSON&&(b=c(a,b)),b}function c(a,b){try{return JSON.stringify(a)}catch(c){return b}}return{formatError:a,formatObject:b,tryStringify:c}})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],41:[function(a,b,c){(function(a){!function(b){"use strict";b(function(){return function(b){function c(a,b){this._handler=a===u?b:d(a)}function d(a){function b(a){e.resolve(a)}function c(a){e.reject(a)}function d(a){e.notify(a)}var e=new w;try{a(b,c,d)}catch(f){c(f)}return e}function e(a){return J(a)?a:new c(u,new x(r(a)))}function f(a){return new c(u,new x(new A(a)))}function g(){return aa}function h(){return new c(u,new w)}function i(a,b){var c=new w(a.receiver,a.join().context);return new b(u,c)}function j(a){return l(T,null,a)}function k(a,b){return l(O,a,b)}function l(a,b,d){function e(c,e,g){g.resolved||m(d,f,c,a(b,e,c),g)}function f(a,b,c){k[a]=b,0===--j&&c.become(new z(k))}for(var g,h="function"==typeof b?e:f,i=new w,j=d.length>>>0,k=new Array(j),l=0;l<d.length&&!i.resolved;++l)g=d[l],void 0!==g||l in d?m(d,h,l,g,i):--j;return 0===j&&i.become(new z(k)),new c(u,i)}function m(a,b,c,d,e){if(K(d)){var f=s(d),g=f.state();0===g?f.fold(b,c,void 0,e):g>0?b(c,f.value,e):(e.become(f),n(a,c+1,f))}else b(c,d,e)}function n(a,b,c){for(var d=b;d<a.length;++d)o(r(a[d]),c)}function o(a,b){if(a!==b){var c=a.state();0===c?a.visit(a,void 0,a._unreport):0>c&&a._unreport()}}function p(a){return"object"!=typeof a||null===a?f(new TypeError("non-iterable passed to race()")):0===a.length?g():1===a.length?e(a[0]):q(a)}function q(a){var b,d,e,f=new w;for(b=0;b<a.length;++b)if(d=a[b],void 0!==d||b in a){if(e=r(d),0!==e.state()){f.become(e),n(a,b+1,e);break}e.visit(f,f.resolve,f.reject)}return new c(u,f)}function r(a){return J(a)?a._handler.join():K(a)?t(a):new z(a)}function s(a){return J(a)?a._handler.join():t(a)}function t(a){try{var b=a.then;return"function"==typeof b?new y(b,a):new z(a)}catch(c){return new A(c)}}function u(){}function v(){}function w(a,b){c.createContext(this,b),this.consumers=void 0,this.receiver=a,this.handler=void 0,this.resolved=!1}function x(a){this.handler=a}function y(a,b){w.call(this),W.enqueue(new G(a,b,this))}function z(a){c.createContext(this),this.value=a}function A(a){c.createContext(this),this.id=++$,this.value=a,this.handled=!1,this.reported=!1,this._report()}function B(a,b){this.rejection=a,this.context=b}function C(a){this.rejection=a}function D(){return new A(new TypeError("Promise cycle"))}function E(a,b){this.continuation=a,this.handler=b}function F(a,b){this.handler=b,this.value=a}function G(a,b,c){this._then=a,this.thenable=b,this.resolver=c}function H(a,b,c,d,e){try{a.call(b,c,d,e)}catch(f){d(f)}}function I(a,b,c,d){this.f=a,this.z=b,this.c=c,this.to=d,this.resolver=Z,this.receiver=this}function J(a){return a instanceof c}function K(a){return("object"==typeof a||"function"==typeof a)&&null!==a}function L(a,b,d,e){return"function"!=typeof a?e.become(b):(c.enterContext(b),P(a,b.value,d,e),void c.exitContext())}function M(a,b,d,e,f){return"function"!=typeof a?f.become(d):(c.enterContext(d),Q(a,b,d.value,e,f),void c.exitContext())}function N(a,b,d,e,f){return"function"!=typeof a?f.notify(b):(c.enterContext(d),R(a,b,e,f),void c.exitContext())}function O(a,b,c){try{return a(b,c)}catch(d){return f(d)}}function P(a,b,c,d){try{d.become(r(a.call(c,b)))}catch(e){d.become(new A(e))}}function Q(a,b,c,d,e){try{a.call(d,b,c,e)}catch(f){e.become(new A(f))}}function R(a,b,c,d){try{d.notify(a.call(c,b))}catch(e){d.notify(e)}}function S(a,b){b.prototype=Y(a.prototype),b.prototype.constructor=b}function T(a,b){return b}function U(){}function V(){return"undefined"!=typeof a&&null!==a&&"function"==typeof a.emit?function(b,c){return"unhandledRejection"===b?a.emit(b,c.value,c):a.emit(b,c)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(a,b,c){var d=!1;try{var e=new c("unhandledRejection");d=e instanceof c}catch(f){}return d?function(a,d){var e=new c(a,{detail:{reason:d.value,key:d},bubbles:!1,cancelable:!0});return!b.dispatchEvent(e)}:a}(U,self,CustomEvent):U}var W=b.scheduler,X=V(),Y=Object.create||function(a){function b(){}return b.prototype=a,new b};c.resolve=e,c.reject=f,c.never=g,c._defer=h,c._handler=r,c.prototype.then=function(a,b,c){var d=this._handler,e=d.join().state();if("function"!=typeof a&&e>0||"function"!=typeof b&&0>e)return new this.constructor(u,d);var f=this._beget(),g=f._handler;return d.chain(g,d.receiver,a,b,c),f},c.prototype["catch"]=function(a){return this.then(void 0,a)},c.prototype._beget=function(){return i(this._handler,this.constructor)},c.all=j,c.race=p,c._traverse=k,c._visitRemaining=n,u.prototype.when=u.prototype.become=u.prototype.notify=u.prototype.fail=u.prototype._unreport=u.prototype._report=U,u.prototype._state=0,u.prototype.state=function(){return this._state},u.prototype.join=function(){for(var a=this;void 0!==a.handler;)a=a.handler;return a},u.prototype.chain=function(a,b,c,d,e){this.when({resolver:a,receiver:b,fulfilled:c,rejected:d,progress:e})},u.prototype.visit=function(a,b,c,d){this.chain(Z,a,b,c,d)},u.prototype.fold=function(a,b,c,d){this.when(new I(a,b,c,d))},S(u,v),v.prototype.become=function(a){a.fail()};var Z=new v;S(u,w),w.prototype._state=0,w.prototype.resolve=function(a){this.become(r(a))},w.prototype.reject=function(a){this.resolved||this.become(new A(a))},w.prototype.join=function(){if(!this.resolved)return this;for(var a=this;void 0!==a.handler;)if(a=a.handler,a===this)return this.handler=D();return a},w.prototype.run=function(){var a=this.consumers,b=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var c=0;c<a.length;++c)b.when(a[c])},w.prototype.become=function(a){this.resolved||(this.resolved=!0,this.handler=a,void 0!==this.consumers&&W.enqueue(this),void 0!==this.context&&a._report(this.context))},w.prototype.when=function(a){this.resolved?W.enqueue(new E(a,this.handler)):void 0===this.consumers?this.consumers=[a]:this.consumers.push(a)},w.prototype.notify=function(a){this.resolved||W.enqueue(new F(a,this))},w.prototype.fail=function(a){var b="undefined"==typeof a?this.context:a;this.resolved&&this.handler.join().fail(b)},w.prototype._report=function(a){this.resolved&&this.handler.join()._report(a)},w.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},S(u,x),x.prototype.when=function(a){W.enqueue(new E(a,this))},x.prototype._report=function(a){this.join()._report(a)},x.prototype._unreport=function(){this.join()._unreport()},S(w,y),S(u,z),z.prototype._state=1,z.prototype.fold=function(a,b,c,d){M(a,b,this,c,d)},z.prototype.when=function(a){L(a.fulfilled,this,a.receiver,a.resolver)};var $=0;S(u,A),A.prototype._state=-1,A.prototype.fold=function(a,b,c,d){d.become(this)},A.prototype.when=function(a){"function"==typeof a.rejected&&this._unreport(),L(a.rejected,this,a.receiver,a.resolver)},A.prototype._report=function(a){W.afterQueue(new B(this,a))},A.prototype._unreport=function(){this.handled||(this.handled=!0,W.afterQueue(new C(this)))},A.prototype.fail=function(a){this.reported=!0,X("unhandledRejection",this),c.onFatalRejection(this,void 0===a?this.context:a)},B.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,X("unhandledRejection",this.rejection)||c.onPotentiallyUnhandledRejection(this.rejection,this.context))},C.prototype.run=function(){this.rejection.reported&&(X("rejectionHandled",this.rejection)||c.onPotentiallyUnhandledRejectionHandled(this.rejection))},c.createContext=c.enterContext=c.exitContext=c.onPotentiallyUnhandledRejection=c.onPotentiallyUnhandledRejectionHandled=c.onFatalRejection=U;var _=new u,aa=new c(u,_);return E.prototype.run=function(){this.handler.join().when(this.continuation)},F.prototype.run=function(){var a=this.handler.consumers;if(void 0!==a)for(var b,c=0;c<a.length;++c)b=a[c],N(b.progress,this.value,this.handler,b.receiver,b.resolver)},G.prototype.run=function(){function a(a){d.resolve(a)}function b(a){d.reject(a)}function c(a){d.notify(a)}var d=this.resolver;H(this._then,this.thenable,a,b,c)},I.prototype.fulfilled=function(a){this.f.call(this.c,this.z,a,this.to)},I.prototype.rejected=function(a){this.to.reject(a)},I.prototype.progress=function(a){this.to.notify(a)},c}})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})}).call(this,a("_process"))},{_process:24}],42:[function(a,b,c){!function(a){"use strict";a(function(){function a(){return{state:"pending"}}function b(a){return{state:"rejected",reason:a}}function c(a){return{state:"fulfilled",value:a}}function d(d){var e=d.state();return 0===e?a():e>0?c(d.value):b(d.value)}return{pending:a,fulfilled:c,rejected:b,inspect:d}})}("function"==typeof define&&define.amd?define:function(a){b.exports=a()})},{}],43:[function(a,b,c){!function(a){"use strict";a(function(a){function b(a,b,c,d){var e=x.resolve(a);return arguments.length<2?e:e.then(b,c,d)}function c(a){return new x(a)}function d(a){return function(){for(var b=0,c=arguments.length,d=new Array(c);c>b;++b)d[b]=arguments[b];return y(a,this,d)}}function e(a){for(var b=0,c=arguments.length-1,d=new Array(c);c>b;++b)d[b]=arguments[b+1];return y(a,this,d)}function f(){return new g}function g(){function a(a){d._handler.resolve(a)}function b(a){d._handler.reject(a)}function c(a){d._handler.notify(a)}var d=x._defer();this.promise=d,this.resolve=a,this.reject=b,this.notify=c,this.resolver={resolve:a,reject:b,notify:c}}function h(a){return a&&"function"==typeof a.then}function i(){return x.all(arguments)}function j(a){return b(a,x.all)}function k(a){return b(a,x.settle)}function l(a,c){return b(a,function(a){return x.map(a,c)})}function m(a,c){return b(a,function(a){return x.filter(a,c)})}var n=a("./lib/decorators/timed"),o=a("./lib/decorators/array"),p=a("./lib/decorators/flow"),q=a("./lib/decorators/fold"),r=a("./lib/decorators/inspect"),s=a("./lib/decorators/iterate"),t=a("./lib/decorators/progress"),u=a("./lib/decorators/with"),v=a("./lib/decorators/unhandledRejection"),w=a("./lib/TimeoutError"),x=[o,p,q,s,t,r,u,n,v].reduce(function(a,b){return b(a)},a("./lib/Promise")),y=a("./lib/apply")(x);return b.promise=c,b.resolve=x.resolve,b.reject=x.reject,b.lift=d,b["try"]=e,b.attempt=e,b.iterate=x.iterate,b.unfold=x.unfold,b.join=i,b.all=j,b.settle=k,b.any=d(x.any),b.some=d(x.some),b.race=d(x.race),b.map=l,b.filter=m,b.reduce=d(x.reduce),b.reduceRight=d(x.reduceRight),b.isPromiseLike=h,b.Promise=x,b.defer=f,b.TimeoutError=w,b})}("function"==typeof define&&define.amd?define:function(c){b.exports=c(a)})},{"./lib/Promise":26,"./lib/TimeoutError":28,"./lib/apply":29,"./lib/decorators/array":30,"./lib/decorators/flow":31,"./lib/decorators/fold":32,"./lib/decorators/inspect":33,"./lib/decorators/iterate":34,"./lib/decorators/progress":35,"./lib/decorators/timed":36,"./lib/decorators/unhandledRejection":37,"./lib/decorators/with":38}],44:[function(a,b,c){var d=a("./src/zepto");a("./src/ajax"),a("./src/event"),a("./src/touch"),a("./src/fx"),a("./src/fx_methods"),b.exports=d},{"./src/ajax":45,"./src/event":46,"./src/fx":47,"./src/fx_methods":48,"./src/touch":49,"./src/zepto":50}],45:[function(a,b,c){!function(a){function b(b,c,d){var e=a.Event(c);return a(b).trigger(e,d),!e.isDefaultPrevented()}function c(a,c,d,e){return a.global?b(c||s,d,e):void 0}function d(b){b.global&&0===a.active++&&c(b,null,"ajaxStart")}function e(b){b.global&&!--a.active&&c(b,null,"ajaxStop")}function f(a,b){var d=b.context;return b.beforeSend.call(d,a,b)===!1||c(b,d,"ajaxBeforeSend",[a,b])===!1?!1:void c(b,d,"ajaxSend",[a,b])}function g(a,b,d,e){var f=d.context,g="success";d.success.call(f,a,g,b),e&&e.resolveWith(f,[a,g,b]),c(d,f,"ajaxSuccess",[b,d,a]),i(g,b,d)}function h(a,b,d,e,f){var g=e.context;e.error.call(g,d,b,a),f&&f.rejectWith(g,[d,b,a]),c(e,g,"ajaxError",[d,e,a||b]),i(b,d,e)}function i(a,b,d){var f=d.context;d.complete.call(f,b,a),c(d,f,"ajaxComplete",[b,d]),e(d)}function j(){}function k(a){return a&&(a=a.split(";",2)[0]),a&&(a==x?"html":a==w?"json":u.test(a)?"script":v.test(a)&&"xml")||"text"}function l(a,b){return""==b?a:(a+"&"+b).replace(/[&?]{1,2}/,"?")}function m(b){b.processData&&b.data&&"string"!=a.type(b.data)&&(b.data=a.param(b.data,b.traditional)),!b.data||b.type&&"GET"!=b.type.toUpperCase()||(b.url=l(b.url,b.data),b.data=void 0)}function n(b,c,d,e){return a.isFunction(c)&&(e=d,d=c,c=void 0),a.isFunction(d)||(e=d,d=void 0),{url:b,data:c,success:d,dataType:e}}function o(b,c,d,e){var f,g=a.isArray(c),h=a.isPlainObject(c);a.each(c,function(c,i){f=a.type(i),e&&(c=d?e:e+"["+(h||"object"==f||"array"==f?c:"")+"]"),!e&&g?b.add(i.name,i.value):"array"==f||!d&&"object"==f?o(b,i,d,c):b.add(c,i)})}var p,q,r=0,s=window.document,t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,u=/^(?:text|application)\/javascript/i,v=/^(?:text|application)\/xml/i,w="application/json",x="text/html",y=/^\s*$/;a.active=0,a.ajaxJSONP=function(b,c){if(!("type"in b))return a.ajax(b);var d,e,i=b.jsonpCallback,j=(a.isFunction(i)?i():i)||"jsonp"+ ++r,k=s.createElement("script"),l=window[j],m=function(b){a(k).triggerHandler("error",b||"abort")},n={abort:m};return c&&c.promise(n),a(k).on("load error",function(f,i){clearTimeout(e),a(k).off().remove(),"error"!=f.type&&d?g(d[0],n,b,c):h(null,i||"error",n,b,c),window[j]=l,d&&a.isFunction(l)&&l(d[0]),l=d=void 0}),f(n,b)===!1?(m("abort"),n):(window[j]=function(){d=arguments},k.src=b.url.replace(/\?(.+)=\?/,"?$1="+j),s.head.appendChild(k),b.timeout>0&&(e=setTimeout(function(){m("timeout")},b.timeout)),n)},a.ajaxSettings={type:"GET",beforeSend:j,success:j,error:j,complete:j,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:w,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},a.ajax=function(b){var c=a.extend({},b||{}),e=a.Deferred&&a.Deferred();for(p in a.ajaxSettings)void 0===c[p]&&(c[p]=a.ajaxSettings[p]);d(c),c.crossDomain||(c.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(c.url)&&RegExp.$2!=window.location.host),c.url||(c.url=window.location.toString()),m(c),c.cache===!1&&(c.url=l(c.url,"_="+Date.now()));var i=c.dataType,n=/\?.+=\?/.test(c.url);if("jsonp"==i||n)return n||(c.url=l(c.url,c.jsonp?c.jsonp+"=?":c.jsonp===!1?"":"callback=?")),a.ajaxJSONP(c,e);var o,r=c.accepts[i],s={},t=function(a,b){s[a.toLowerCase()]=[a,b]},u=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:window.location.protocol,v=c.xhr(),w=v.setRequestHeader;if(e&&e.promise(v),c.crossDomain||t("X-Requested-With","XMLHttpRequest"),t("Accept",r||"*/*"),(r=c.mimeType||r)&&(r.indexOf(",")>-1&&(r=r.split(",",2)[0]),v.overrideMimeType&&v.overrideMimeType(r)),(c.contentType||c.contentType!==!1&&c.data&&"GET"!=c.type.toUpperCase())&&t("Content-Type",c.contentType||"application/x-www-form-urlencoded"),c.headers)for(q in c.headers)t(q,c.headers[q]);if(v.setRequestHeader=t,v.onreadystatechange=function(){if(4==v.readyState){v.onreadystatechange=j,clearTimeout(o);var b,d=!1;if(v.status>=200&&v.status<300||304==v.status||0==v.status&&"file:"==u){i=i||k(c.mimeType||v.getResponseHeader("content-type")),b=v.responseText;try{"script"==i?(1,eval)(b):"xml"==i?b=v.responseXML:"json"==i&&(b=y.test(b)?null:a.parseJSON(b))}catch(f){d=f}d?h(d,"parsererror",v,c,e):g(b,v,c,e)}else h(v.statusText||null,v.status?"error":"abort",v,c,e)}},f(v,c)===!1)return v.abort(),h(null,"abort",v,c,e),v;if(c.xhrFields)for(q in c.xhrFields)v[q]=c.xhrFields[q];var x="async"in c?c.async:!0;v.open(c.type,c.url,x,c.username,c.password);for(q in s)w.apply(v,s[q]);return c.timeout>0&&(o=setTimeout(function(){v.onreadystatechange=j,v.abort(),h(null,"timeout",v,c,e)},c.timeout)),v.send(c.data?c.data:null),v},a.get=function(){return a.ajax(n.apply(null,arguments))},a.post=function(){var b=n.apply(null,arguments);return b.type="POST",a.ajax(b)},a.getJSON=function(){var b=n.apply(null,arguments);return b.dataType="json",a.ajax(b)},a.fn.load=function(b,c,d){if(!this.length)return this;var e,f=this,g=b.split(/\s/),h=n(b,c,d),i=h.success;return g.length>1&&(h.url=g[0],e=g[1]),h.success=function(b){f.html(e?a("<div>").html(b.replace(t,"")).find(e):b),i&&i.apply(f,arguments)},a.ajax(h),this};var z=encodeURIComponent;a.param=function(a,b){var c=[];return c.add=function(a,b){this.push(z(a)+"="+z(b))},o(c,a,b),c.join("&").replace(/%20/g,"+")}}(Zepto)},{}],46:[function(a,b,c){!function(a){function b(a){return a._zid||(a._zid=m++)}function c(a,c,f,g){if(c=d(c),c.ns)var h=e(c.ns);return(q[b(a)]||[]).filter(function(a){return a&&(!c.e||a.e==c.e)&&(!c.ns||h.test(a.ns))&&(!f||b(a.fn)===b(f))&&(!g||a.sel==g)})}function d(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function e(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function f(a,b){return a.del&&!s&&a.e in t||!!b}function g(a){return u[a]||s&&t[a]||a}function h(c,e,h,i,k,m,n){var o=b(c),p=q[o]||(q[o]=[]);e.split(/\s/).forEach(function(b){if("ready"==b)return a(document).ready(h);var e=d(b);e.fn=h,e.sel=k,e.e in u&&(h=function(b){var c=b.relatedTarget;return!c||c!==this&&!a.contains(this,c)?e.fn.apply(this,arguments):void 0}),e.del=m;var o=m||h;e.proxy=function(a){if(a=j(a),!a.isImmediatePropagationStopped()){a.data=i;var b=o.apply(c,a._args==l?[a]:[a].concat(a._args));return b===!1&&(a.preventDefault(),a.stopPropagation()),b}},e.i=p.length,p.push(e),"addEventListener"in c&&c.addEventListener(g(e.e),e.proxy,f(e,n))})}function i(a,d,e,h,i){var j=b(a);(d||"").split(/\s/).forEach(function(b){c(a,b,e,h).forEach(function(b){delete q[j][b.i],"removeEventListener"in a&&a.removeEventListener(g(b.e),b.proxy,f(b,i))})})}function j(b,c){return(c||!b.isDefaultPrevented)&&(c||(c=b),a.each(y,function(a,d){var e=c[a];b[a]=function(){return this[d]=v,e&&e.apply(c,arguments)},b[d]=w}),(c.defaultPrevented!==l?c.defaultPrevented:"returnValue"in c?c.returnValue===!1:c.getPreventDefault&&c.getPreventDefault())&&(b.isDefaultPrevented=v)),b}function k(a){var b,c={originalEvent:a};for(b in a)x.test(b)||a[b]===l||(c[b]=a[b]);return j(c,a)}var l,m=1,n=Array.prototype.slice,o=a.isFunction,p=function(a){return"string"==typeof a},q={},r={},s="onfocusin"in window,t={focus:"focusin",blur:"focusout"},u={mouseenter:"mouseover",mouseleave:"mouseout"};r.click=r.mousedown=r.mouseup=r.mousemove="MouseEvents",a.event={add:h,remove:i},a.proxy=function(c,d){if(o(c)){var e=function(){return c.apply(d,arguments)};return e._zid=b(c),e}if(p(d))return a.proxy(c[d],c);throw new TypeError("expected function")},a.fn.bind=function(a,b,c){return this.on(a,b,c)},a.fn.unbind=function(a,b){return this.off(a,b)},a.fn.one=function(a,b,c,d){return this.on(a,b,c,d,1)};var v=function(){return!0},w=function(){return!1},x=/^([A-Z]|returnValue$|layer[XY]$)/,y={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(a,b,c){return this.on(b,a,c)},a.fn.undelegate=function(a,b,c){return this.off(b,a,c)},a.fn.live=function(b,c){return a(document.body).delegate(this.selector,b,c),this},a.fn.die=function(b,c){return a(document.body).undelegate(this.selector,b,c),this},a.fn.on=function(b,c,d,e,f){var g,j,m=this;return b&&!p(b)?(a.each(b,function(a,b){m.on(a,c,d,b,f)}),m):(p(c)||o(e)||e===!1||(e=d,d=c,c=l),(o(d)||d===!1)&&(e=d,d=l),e===!1&&(e=w),m.each(function(l,m){f&&(g=function(a){return i(m,a.type,e),e.apply(this,arguments)}),c&&(j=function(b){var d,f=a(b.target).closest(c,m).get(0);return f&&f!==m?(d=a.extend(k(b),{currentTarget:f,liveFired:m}),(g||e).apply(f,[d].concat(n.call(arguments,1)))):void 0}),h(m,b,e,d,c,j||g)}))},a.fn.off=function(b,c,d){var e=this;return b&&!p(b)?(a.each(b,function(a,b){e.off(a,c,b)}),e):(p(c)||o(d)||d===!1||(d=c,c=l),d===!1&&(d=w),e.each(function(){i(this,b,d,c)}))},a.fn.trigger=function(b,c){return b=p(b)||a.isPlainObject(b)?a.Event(b):j(b),b._args=c,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(b):a(this).triggerHandler(b,c)})},a.fn.triggerHandler=function(b,d){var e,f;return this.each(function(g,h){e=k(p(b)?a.Event(b):b),e._args=d,e.target=h,a.each(c(h,b.type||b),function(a,b){return f=b.proxy(e),e.isImmediatePropagationStopped()?!1:void 0})}),f},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(b){a.fn[b]=function(a){return a?this.bind(b,a):this.trigger(b)}}),["focus","blur"].forEach(function(b){a.fn[b]=function(a){return a?this.bind(b,a):this.each(function(){try{this[b]()}catch(a){}}),this}}),a.Event=function(a,b){p(a)||(b=a,a=b.type);var c=document.createEvent(r[a]||"Events"),d=!0;if(b)for(var e in b)"bubbles"==e?d=!!b[e]:c[e]=b[e];return c.initEvent(a,d,!0),j(c)}}(Zepto)},{}],47:[function(a,b,c){!function(a,b){function c(a){return a.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function d(a){return e?e+a:a.toLowerCase()}var e,f,g,h,i,j,k,l,m,n,o="",p={Webkit:"webkit",Moz:"",O:"o"},q=window.document,r=q.createElement("div"),s=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,t={};a.each(p,function(a,c){return r.style[a+"TransitionProperty"]!==b?(o="-"+a.toLowerCase()+"-",e=c,!1):void 0}),f=o+"transform",t[g=o+"transition-property"]=t[h=o+"transition-duration"]=t[j=o+"transition-delay"]=t[i=o+"transition-timing-function"]=t[k=o+"animation-name"]=t[l=o+"animation-duration"]=t[n=o+"animation-delay"]=t[m=o+"animation-timing-function"]="",a.fx={off:e===b&&r.style.transitionProperty===b,speeds:{_default:400,fast:200,slow:600},cssPrefix:o,transitionEnd:d("TransitionEnd"),animationEnd:d("AnimationEnd")},a.fn.animate=function(c,d,e,f,g){return a.isFunction(d)&&(f=d,e=b,d=b),a.isFunction(e)&&(f=e,e=b),a.isPlainObject(d)&&(e=d.easing,f=d.complete,g=d.delay,d=d.duration),d&&(d=("number"==typeof d?d:a.fx.speeds[d]||a.fx.speeds._default)/1e3),g&&(g=parseFloat(g)/1e3),this.anim(c,d,e,f,g)},a.fn.anim=function(d,e,o,p,q){var r,u,v,w={},x="",y=this,z=a.fx.transitionEnd,A=!1;if(e===b&&(e=a.fx.speeds._default/1e3),q===b&&(q=0),a.fx.off&&(e=0),"string"==typeof d)w[k]=d,w[l]=e+"s",w[n]=q+"s",w[m]=o||"linear",z=a.fx.animationEnd;else{u=[];for(r in d)s.test(r)?x+=r+"("+d[r]+") ":(w[r]=d[r],u.push(c(r)));x&&(w[f]=x,u.push(f)),e>0&&"object"==typeof d&&(w[g]=u.join(", "),w[h]=e+"s",w[j]=q+"s",w[i]=o||"linear")}return v=function(b){if("undefined"!=typeof b){if(b.target!==b.currentTarget)return;a(b.target).unbind(z,v)}else a(this).unbind(z,v);A=!0,a(this).css(t),p&&p.call(this)},e>0&&(this.bind(z,v),setTimeout(function(){A||v.call(y)},1e3*e+25)),this.size()&&this.get(0).clientLeft,this.css(w),0>=e&&setTimeout(function(){y.each(function(){v.call(this)})},0),this},r=null}(Zepto)},{}],48:[function(a,b,c){!function(a,b){function c(c,d,e,f,g){"function"!=typeof d||g||(g=d,d=b);var h={opacity:e};return f&&(h.scale=f,c.css(a.fx.cssPrefix+"transform-origin","0 0")),c.animate(h,d,null,g)}function d(b,d,e,f){return c(b,d,0,e,function(){g.call(a(this)),f&&f.call(this)})}var e=window.document,f=(e.documentElement,a.fn.show),g=a.fn.hide,h=a.fn.toggle;a.fn.show=function(a,d){return f.call(this),a===b?a=0:this.css("opacity",0),c(this,a,1,"1,1",d)},a.fn.hide=function(a,c){return a===b?g.call(this):d(this,a,"0,0",c)},a.fn.toggle=function(c,d){return c===b||"boolean"==typeof c?h.call(this,c):this.each(function(){var b=a(this);b["none"==b.css("display")?"show":"hide"](c,d)})},a.fn.fadeTo=function(a,b,d){return c(this,a,b,null,d)},a.fn.fadeIn=function(a,b){var c=this.css("opacity");return c>0?this.css("opacity",0):c=1,f.call(this).fadeTo(a,c,b)},a.fn.fadeOut=function(a,b){return d(this,a,null,b)},a.fn.fadeToggle=function(b,c){return this.each(function(){var d=a(this);d[0==d.css("opacity")||"none"==d.css("display")?"fadeIn":"fadeOut"](b,c)})}}(Zepto)},{}],49:[function(a,b,c){var d=a("./zepto");!function(a){function b(a,b,c,d){return Math.abs(a-b)>=Math.abs(c-d)?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function c(){k=null,m.last&&(m.el.trigger("longTap"),m={})}function d(){k&&clearTimeout(k),k=null}function e(){h&&clearTimeout(h),i&&clearTimeout(i),j&&clearTimeout(j),k&&clearTimeout(k),h=i=j=k=null,m={}}function f(a){return("touch"==a.pointerType||a.pointerType==a.MSPOINTER_TYPE_TOUCH)&&a.isPrimary}function g(a,b){return a.type=="pointer"+b||a.type.toLowerCase()=="mspointer"+b}var h,i,j,k,l,m={},n=750;a(document).ready(function(){var o,p,q,r,s=0,t=0;"MSGesture"in window&&(l=new MSGesture,l.target=document.body),
a(document).bind("MSGestureEnd",function(a){var b=a.velocityX>1?"Right":a.velocityX<-1?"Left":a.velocityY>1?"Down":a.velocityY<-1?"Up":null;b&&(m.el.trigger("swipe"),m.el.trigger("swipe"+b))}).on("touchstart MSPointerDown pointerdown",function(b){(!(r=g(b,"down"))||f(b))&&(q=r?b:b.touches[0],b.touches&&1===b.touches.length&&m.x2&&(m.x2=void 0,m.y2=void 0),o=Date.now(),p=o-(m.last||o),m.el=a("tagName"in q.target?q.target:q.target.parentNode),h&&clearTimeout(h),m.x1=q.pageX,m.y1=q.pageY,p>0&&250>=p&&(m.isDoubleTap=!0),m.last=o,k=setTimeout(c,n),l&&r&&l.addPointer(b.pointerId))}).on("touchmove MSPointerMove pointermove",function(a){(!(r=g(a,"move"))||f(a))&&(q=r?a:a.touches[0],d(),m.x2=q.pageX,m.y2=q.pageY,s+=Math.abs(m.x1-m.x2),t+=Math.abs(m.y1-m.y2))}).on("touchend MSPointerUp pointerup",function(c){(!(r=g(c,"up"))||f(c))&&(d(),m.x2&&Math.abs(m.x1-m.x2)>30||m.y2&&Math.abs(m.y1-m.y2)>30?j=setTimeout(function(){m.el.trigger("swipe"),m.el.trigger("swipe"+b(m.x1,m.x2,m.y1,m.y2)),m={}},0):"last"in m&&(30>s&&30>t?i=setTimeout(function(){var b=a.Event("tap");b.cancelTouch=e,m.el.trigger(b),m.isDoubleTap?(m.el&&m.el.trigger("doubleTap"),m={}):h=setTimeout(function(){h=null,m.el&&m.el.trigger("singleTap"),m={}},250)},0):m={}),s=t=0)}).on("touchcancel MSPointerCancel pointercancel",e),a(window).on("scroll",e)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(b){a.fn[b]=function(a){return this.on(b,a)}})}(d)},{"./zepto":50}],50:[function(a,b,c){var d=function(){function a(a){return null==a?String(a):U[V.call(a)]||"object"}function b(b){return"function"==a(b)}function c(a){return null!=a&&a==a.window}function d(a){return null!=a&&a.nodeType==a.DOCUMENT_NODE}function e(b){return"object"==a(b)}function f(a){return e(a)&&!c(a)&&Object.getPrototypeOf(a)==Object.prototype}function g(a){return"number"==typeof a.length}function h(a){return D.call(a,function(a){return null!=a})}function i(a){return a.length>0?x.fn.concat.apply([],a):a}function j(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function k(a){return a in G?G[a]:G[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function l(a,b){return"number"!=typeof b||H[j(a)]?b:b+"px"}function m(a){var b,c;return F[a]||(b=E.createElement(a),E.body.appendChild(b),c=getComputedStyle(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"==c&&(c="block"),F[a]=c),F[a]}function n(a){return"children"in a?C.call(a.children):x.map(a.childNodes,function(a){return 1==a.nodeType?a:void 0})}function o(a,b,c){for(w in b)c&&(f(b[w])||Z(b[w]))?(f(b[w])&&!f(a[w])&&(a[w]={}),Z(b[w])&&!Z(a[w])&&(a[w]=[]),o(a[w],b[w],c)):b[w]!==v&&(a[w]=b[w])}function p(a,b){return null==b?x(a):x(a).filter(b)}function q(a,c,d,e){return b(c)?c.call(a,d,e):c}function r(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function s(a,b){var c=a.className,d=c&&c.baseVal!==v;return b===v?d?c.baseVal:c:void(d?c.baseVal=b:a.className=b)}function t(a){var b;try{return a?"true"==a||("false"==a?!1:"null"==a?null:/^0/.test(a)||isNaN(b=Number(a))?/^[\[\{]/.test(a)?x.parseJSON(a):a:b):a}catch(c){return a}}function u(a,b){b(a);for(var c in a.childNodes)u(a.childNodes[c],b)}var v,w,x,y,z,A,B=[],C=B.slice,D=B.filter,E=window.document,F={},G={},H={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},I=/^\s*<(\w+|!)[^>]*>/,J=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,K=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,L=/^(?:body|html)$/i,M=/([A-Z])/g,N=["val","css","html","text","data","width","height","offset"],O=["after","prepend","before","append"],P=E.createElement("table"),Q=E.createElement("tr"),R={tr:E.createElement("tbody"),tbody:P,thead:P,tfoot:P,td:Q,th:Q,"*":E.createElement("div")},S=/complete|loaded|interactive/,T=/^[\w-]*$/,U={},V=U.toString,W={},X=E.createElement("div"),Y={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Z=Array.isArray||function(a){return a instanceof Array};return W.matches=function(a,b){if(!b||!a||1!==a.nodeType)return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=X).appendChild(a),d=~W.qsa(e,b).indexOf(a),f&&X.removeChild(a),d},z=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},A=function(a){return D.call(a,function(b,c){return a.indexOf(b)==c})},W.fragment=function(a,b,c){var d,e,g;return J.test(a)&&(d=x(E.createElement(RegExp.$1))),d||(a.replace&&(a=a.replace(K,"<$1></$2>")),b===v&&(b=I.test(a)&&RegExp.$1),b in R||(b="*"),g=R[b],g.innerHTML=""+a,d=x.each(C.call(g.childNodes),function(){g.removeChild(this)})),f(c)&&(e=x(d),x.each(c,function(a,b){N.indexOf(a)>-1?e[a](b):e.attr(a,b)})),d},W.Z=function(a,b){return a=a||[],a.__proto__=x.fn,a.selector=b||"",a},W.isZ=function(a){return a instanceof W.Z},W.init=function(a,c){var d;if(!a)return W.Z();if("string"==typeof a)if(a=a.trim(),"<"==a[0]&&I.test(a))d=W.fragment(a,RegExp.$1,c),a=null;else{if(c!==v)return x(c).find(a);d=W.qsa(E,a)}else{if(b(a))return x(E).ready(a);if(W.isZ(a))return a;if(Z(a))d=h(a);else if(e(a))d=[a],a=null;else if(I.test(a))d=W.fragment(a.trim(),RegExp.$1,c),a=null;else{if(c!==v)return x(c).find(a);d=W.qsa(E,a)}}return W.Z(d,a)},x=function(a,b){return W.init(a,b)},x.extend=function(a){var b,c=C.call(arguments,1);return"boolean"==typeof a&&(b=a,a=c.shift()),c.forEach(function(c){o(a,c,b)}),a},W.qsa=function(a,b){var c,e="#"==b[0],f=!e&&"."==b[0],g=e||f?b.slice(1):b,h=T.test(g);return d(a)&&h&&e?(c=a.getElementById(g))?[c]:[]:1!==a.nodeType&&9!==a.nodeType?[]:C.call(h&&!e?f?a.getElementsByClassName(g):a.getElementsByTagName(b):a.querySelectorAll(b))},x.contains=function(a,b){return a!==b&&a.contains(b)},x.type=a,x.isFunction=b,x.isWindow=c,x.isArray=Z,x.isPlainObject=f,x.isEmptyObject=function(a){var b;for(b in a)return!1;return!0},x.inArray=function(a,b,c){return B.indexOf.call(b,a,c)},x.camelCase=z,x.trim=function(a){return null==a?"":String.prototype.trim.call(a)},x.uuid=0,x.support={},x.expr={},x.map=function(a,b){var c,d,e,f=[];if(g(a))for(d=0;d<a.length;d++)c=b(a[d],d),null!=c&&f.push(c);else for(e in a)c=b(a[e],e),null!=c&&f.push(c);return i(f)},x.each=function(a,b){var c,d;if(g(a)){for(c=0;c<a.length;c++)if(b.call(a[c],c,a[c])===!1)return a}else for(d in a)if(b.call(a[d],d,a[d])===!1)return a;return a},x.grep=function(a,b){return D.call(a,b)},window.JSON&&(x.parseJSON=JSON.parse),x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){U["[object "+b+"]"]=b.toLowerCase()}),x.fn={forEach:B.forEach,reduce:B.reduce,push:B.push,sort:B.sort,indexOf:B.indexOf,concat:B.concat,map:function(a){return x(x.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return x(C.apply(this,arguments))},ready:function(a){return S.test(E.readyState)&&E.body?a(x):E.addEventListener("DOMContentLoaded",function(){a(x)},!1),this},get:function(a){return a===v?C.call(this):this[a>=0?a:a+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){return B.every.call(this,function(b,c){return a.call(b,c,b)!==!1}),this},filter:function(a){return b(a)?this.not(this.not(a)):x(D.call(this,function(b){return W.matches(b,a)}))},add:function(a,b){return x(A(this.concat(x(a,b))))},is:function(a){return this.length>0&&W.matches(this[0],a)},not:function(a){var c=[];if(b(a)&&a.call!==v)this.each(function(b){a.call(this,b)||c.push(this)});else{var d="string"==typeof a?this.filter(a):g(a)&&b(a.item)?C.call(a):x(a);this.forEach(function(a){d.indexOf(a)<0&&c.push(a)})}return x(c)},has:function(a){return this.filter(function(){return e(a)?x.contains(this,a):x(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!e(a)?a:x(a)},last:function(){var a=this[this.length-1];return a&&!e(a)?a:x(a)},find:function(a){var b,c=this;return b=a?"object"==typeof a?x(a).filter(function(){var a=this;return B.some.call(c,function(b){return x.contains(b,a)})}):1==this.length?x(W.qsa(this[0],a)):this.map(function(){return W.qsa(this,a)}):[]},closest:function(a,b){var c=this[0],e=!1;for("object"==typeof a&&(e=x(a));c&&!(e?e.indexOf(c)>=0:W.matches(c,a));)c=c!==b&&!d(c)&&c.parentNode;return x(c)},parents:function(a){for(var b=[],c=this;c.length>0;)c=x.map(c,function(a){return(a=a.parentNode)&&!d(a)&&b.indexOf(a)<0?(b.push(a),a):void 0});return p(b,a)},parent:function(a){return p(A(this.pluck("parentNode")),a)},children:function(a){return p(this.map(function(){return n(this)}),a)},contents:function(){return this.map(function(){return C.call(this.childNodes)})},siblings:function(a){return p(this.map(function(a,b){return D.call(n(b.parentNode),function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return x.map(this,function(b){return b[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=m(this.nodeName))})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var c=b(a);if(this[0]&&!c)var d=x(a).get(0),e=d.parentNode||this.length>1;return this.each(function(b){x(this).wrapAll(c?a.call(this,b):e?d.cloneNode(!0):d)})},wrapAll:function(a){if(this[0]){x(this[0]).before(a=x(a));for(var b;(b=a.children()).length;)a=b.first();x(a).append(this)}return this},wrapInner:function(a){var c=b(a);return this.each(function(b){var d=x(this),e=d.contents(),f=c?a.call(this,b):a;e.length?e.wrapAll(f):d.append(f)})},unwrap:function(){return this.parent().each(function(){x(this).replaceWith(x(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(a){return this.each(function(){var b=x(this);(a===v?"none"==b.css("display"):a)?b.show():b.hide()})},prev:function(a){return x(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return x(this.pluck("nextElementSibling")).filter(a||"*")},html:function(a){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(b){var c=this.innerHTML;x(this).empty().append(q(this,a,b,c))})},text:function(a){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=a===v?"":""+a})},attr:function(a,b){var c;return"string"==typeof a&&b===v?0==this.length||1!==this[0].nodeType?v:"value"==a&&"INPUT"==this[0].nodeName?this.val():!(c=this[0].getAttribute(a))&&a in this[0]?this[0][a]:c:this.each(function(c){if(1===this.nodeType)if(e(a))for(w in a)r(this,w,a[w]);else r(this,a,q(this,b,c,this.getAttribute(a)))})},removeAttr:function(a){return this.each(function(){1===this.nodeType&&r(this,a)})},prop:function(a,b){return a=Y[a]||a,b===v?this[0]&&this[0][a]:this.each(function(c){this[a]=q(this,b,c,this[a])})},data:function(a,b){var c=this.attr("data-"+a.replace(M,"-$1").toLowerCase(),b);return null!==c?t(c):v},val:function(a){return 0===arguments.length?this[0]&&(this[0].multiple?x(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(b){this.value=q(this,a,b,this.value)})},offset:function(a){if(a)return this.each(function(b){var c=x(this),d=q(this,a,b,c.offset()),e=c.offsetParent().offset(),f={top:d.top-e.top,left:d.left-e.left};"static"==c.css("position")&&(f.position="relative"),c.css(f)});if(0==this.length)return null;var b=this[0].getBoundingClientRect();return{left:b.left+window.pageXOffset,top:b.top+window.pageYOffset,width:Math.round(b.width),height:Math.round(b.height)}},css:function(b,c){if(arguments.length<2){var d=this[0],e=getComputedStyle(d,"");if(!d)return;if("string"==typeof b)return d.style[z(b)]||e.getPropertyValue(b);if(Z(b)){var f={};return x.each(Z(b)?b:[b],function(a,b){f[b]=d.style[z(b)]||e.getPropertyValue(b)}),f}}var g="";if("string"==a(b))c||0===c?g=j(b)+":"+l(b,c):this.each(function(){this.style.removeProperty(j(b))});else for(w in b)b[w]||0===b[w]?g+=j(w)+":"+l(w,b[w])+";":this.each(function(){this.style.removeProperty(j(w))});return this.each(function(){this.style.cssText+=";"+g})},index:function(a){return a?this.indexOf(x(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return a?B.some.call(this,function(a){return this.test(s(a))},k(a)):!1},addClass:function(a){return a?this.each(function(b){y=[];var c=s(this),d=q(this,a,b,c);d.split(/\s+/g).forEach(function(a){x(this).hasClass(a)||y.push(a)},this),y.length&&s(this,c+(c?" ":"")+y.join(" "))}):this},removeClass:function(a){return this.each(function(b){return a===v?s(this,""):(y=s(this),q(this,a,b,y).split(/\s+/g).forEach(function(a){y=y.replace(k(a)," ")}),void s(this,y.trim()))})},toggleClass:function(a,b){return a?this.each(function(c){var d=x(this),e=q(this,a,c,s(this));e.split(/\s+/g).forEach(function(a){(b===v?!d.hasClass(a):b)?d.addClass(a):d.removeClass(a)})}):this},scrollTop:function(a){if(this.length){var b="scrollTop"in this[0];return a===v?b?this[0].scrollTop:this[0].pageYOffset:this.each(b?function(){this.scrollTop=a}:function(){this.scrollTo(this.scrollX,a)})}},scrollLeft:function(a){if(this.length){var b="scrollLeft"in this[0];return a===v?b?this[0].scrollLeft:this[0].pageXOffset:this.each(b?function(){this.scrollLeft=a}:function(){this.scrollTo(a,this.scrollY)})}},position:function(){if(this.length){var a=this[0],b=this.offsetParent(),c=this.offset(),d=L.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(x(a).css("margin-top"))||0,c.left-=parseFloat(x(a).css("margin-left"))||0,d.top+=parseFloat(x(b[0]).css("border-top-width"))||0,d.left+=parseFloat(x(b[0]).css("border-left-width"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||E.body;a&&!L.test(a.nodeName)&&"static"==x(a).css("position");)a=a.offsetParent;return a})}},x.fn.detach=x.fn.remove,["width","height"].forEach(function(a){var b=a.replace(/./,function(a){return a[0].toUpperCase()});x.fn[a]=function(e){var f,g=this[0];return e===v?c(g)?g["inner"+b]:d(g)?g.documentElement["scroll"+b]:(f=this.offset())&&f[a]:this.each(function(b){g=x(this),g.css(a,q(this,e,b,g[a]()))})}}),O.forEach(function(b,c){var d=c%2;x.fn[b]=function(){var b,e,f=x.map(arguments,function(c){return b=a(c),"object"==b||"array"==b||null==c?c:W.fragment(c)}),g=this.length>1;return f.length<1?this:this.each(function(a,b){e=d?b:b.parentNode,b=0==c?b.nextSibling:1==c?b.firstChild:2==c?b:null,f.forEach(function(a){if(g)a=a.cloneNode(!0);else if(!e)return x(a).remove();u(e.insertBefore(a,b),function(a){null==a.nodeName||"SCRIPT"!==a.nodeName.toUpperCase()||a.type&&"text/javascript"!==a.type||a.src||window.eval.call(window,a.innerHTML)})})})},x.fn[d?b+"To":"insert"+(c?"Before":"After")]=function(a){return x(a)[b](this),this}}),W.Z.prototype=x.fn,W.uniq=A,W.deserializeValue=t,x.zepto=W,x}();window.Zepto=d,void 0===window.$&&(window.$=d),b.exports=d},{}]},{},[8]);